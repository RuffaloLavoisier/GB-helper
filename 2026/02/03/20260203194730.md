# Commit: 3fc1cce75ad4b3cfc932943789bc2b9b9cb59798
## Message: Fix VO2 Max crash on high values
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/VO2MaxRanges.kt

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/VO2MaxRanges.kt b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/VO2MaxRanges.kt
index b1e93b20e5..cd7cb75a11 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/VO2MaxRanges.kt
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/VO2MaxRanges.kt
@@ -34,7 +34,13 @@ object VO2MaxRanges {
             0.5f
         }
 
-        return PERCENTILES[bandIndex] + (positionInBand * (PERCENTILES[bandIndex - 1] - PERCENTILES[bandIndex]))
+        val upperPercentile = if (bandIndex == 0) {
+            1.0f  // Top of superior band is 100th percentile
+        } else {
+            PERCENTILES[bandIndex - 1]
+        }
+
+        return PERCENTILES[bandIndex] + (positionInBand * (upperPercentile - PERCENTILES[bandIndex]))
     }
 
     /**
```
-----------------------------------
