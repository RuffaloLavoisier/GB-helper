# Commit: a6aa9658639be392b0b3e08e43ca20ef4fbd92a6
## Message: Charts: Add hours to x-axis

Fixes #5697
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/DurationXLabelFormatter.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutDetailsFragment.kt

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/charts/WorkoutChartsActivity.kt

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/DurationXLabelFormatter.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/DurationXLabelFormatter.java
index 88726adfd6..5174982b67 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/DurationXLabelFormatter.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/DurationXLabelFormatter.java
@@ -11,12 +11,13 @@ import java.util.GregorianCalendar;
 
 public class DurationXLabelFormatter extends ValueFormatter {
     @SuppressLint("SimpleDateFormat")
-    private final SimpleDateFormat annotationDateFormat;
+    private final SimpleDateFormat annotationDateFormatMmSs = new SimpleDateFormat("mm:ss");
+    @SuppressLint("SimpleDateFormat")
+    private final SimpleDateFormat annotationDateFormatHhMmSs = new SimpleDateFormat("HH:mm:ss");
 
     private final Calendar cal = GregorianCalendar.getInstance();
 
-    public DurationXLabelFormatter(String simpleDateFormatPattern) {
-        this.annotationDateFormat = new SimpleDateFormat(simpleDateFormatPattern);
+    public DurationXLabelFormatter() {
     }
 
     // TODO: this does not work. Cannot use precomputed labels
@@ -26,6 +27,6 @@ public class DurationXLabelFormatter extends ValueFormatter {
         final int ts = (int) value;
         cal.setTimeInMillis(ts);
         final Date date = cal.getTime();
-        return annotationDateFormat.format(date);
+        return (ts >= 3600000 ? annotationDateFormatHhMmSs : annotationDateFormatMmSs).format(date);
     }
-}
\ No newline at end of file
+}
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutDetailsFragment.kt b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutDetailsFragment.kt
index 00b165e6fa..1c84535583 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutDetailsFragment.kt
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutDetailsFragment.kt
@@ -479,7 +479,7 @@ class WorkoutDetailsFragment : Fragment(), MenuProvider {
             isEnabled = true
             textColor = chartTextColor
             position = XAxis.XAxisPosition.BOTTOM
-            valueFormatter = DurationXLabelFormatter("mm:ss")
+            valueFormatter = DurationXLabelFormatter()
         }
         lineChart.axisLeft.apply {
             setDrawGridLines(false)
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/charts/WorkoutChartsActivity.kt b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/charts/WorkoutChartsActivity.kt
index 4e667f14a0..a973d6a739 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/charts/WorkoutChartsActivity.kt
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/charts/WorkoutChartsActivity.kt
@@ -63,7 +63,7 @@ class WorkoutChartsActivity : AbstractGBActivity(), MenuProvider {
             isEnabled = true
             textColor = chartTextColor
             position = XAxis.XAxisPosition.BOTTOM
-            valueFormatter = DurationXLabelFormatter("mm:ss")
+            valueFormatter = DurationXLabelFormatter()
         }
         binding.workoutDataChart.axisLeft.apply {
             setDrawGridLines(false)
```
-----------------------------------
