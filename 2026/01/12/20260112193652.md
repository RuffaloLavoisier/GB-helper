# Commit: 491652f7f0ca1c9a408c23fc3821178da5b5ca9a
## Message: Add a small delay when deleting the device

Prevent the delete activity from just blinking too fast.
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/DeviceDeleteActivity.kt

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/DeviceDeleteActivity.kt b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/DeviceDeleteActivity.kt
index 46341e3a98..8ab2f3758d 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/DeviceDeleteActivity.kt
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/DeviceDeleteActivity.kt
@@ -26,6 +26,7 @@ import androidx.annotation.RequiresApi
 import androidx.lifecycle.lifecycleScope
 import androidx.localbroadcastmanager.content.LocalBroadcastManager
 import kotlinx.coroutines.Dispatchers
+import kotlinx.coroutines.delay
 import kotlinx.coroutines.launch
 import kotlinx.coroutines.withContext
 import nodomain.freeyourgadget.gadgetbridge.R
@@ -76,6 +77,8 @@ class DeviceDeleteActivity : AbstractGBActivity() {
     }
 
     private suspend fun performDeviceDelete(): Exception? = withContext(Dispatchers.IO) {
+        val start = System.currentTimeMillis()
+
         try {
             val coordinator = device.deviceCoordinator
 
@@ -94,6 +97,15 @@ class DeviceDeleteActivity : AbstractGBActivity() {
             return@withContext ex
         }
 
+        val end = System.currentTimeMillis()
+
+        LOG.debug("Deleting the device took {}ms", end - start)
+
+        if (end - start < 1000L) {
+            // Add a small delay to prevent the activity from blinking too fast
+            delay(1000L - (end - start))
+        }
+
         return@withContext null
     }
 
@@ -132,10 +144,6 @@ class DeviceDeleteActivity : AbstractGBActivity() {
         }
     }
 
-    private fun updateStatus(msg: String) {
-        binding.deleteStatusText.text = msg
-    }
-
     companion object {
         private val LOG = LoggerFactory.getLogger(DeviceDeleteActivity::class.java)
 
```
-----------------------------------
