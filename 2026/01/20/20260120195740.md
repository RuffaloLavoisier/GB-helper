# Commit: 1257f9d3f377be5c595bd75d75316d6b763a3b96
## Message: add support for SBM67 Blood Pressure device
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/sbm_67/SBM67BloodPressureSampleProvider.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/sbm_67/SBM67Coordinator.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/sbm_67/SBM67DeviceSupport.java

GBDaoGenerator/src/nodomain/freeyourgadget/gadgetbridge/daogen/GBDaoGenerator.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/AbstractDeviceCoordinator.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/DeviceCoordinator.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/model/DeviceType.java

app/src/main/res/values/strings.xml

## Diff:
```
diff --git a/GBDaoGenerator/src/nodomain/freeyourgadget/gadgetbridge/daogen/GBDaoGenerator.java b/GBDaoGenerator/src/nodomain/freeyourgadget/gadgetbridge/daogen/GBDaoGenerator.java
index ed9d873339..2ad101148a 100644
--- a/GBDaoGenerator/src/nodomain/freeyourgadget/gadgetbridge/daogen/GBDaoGenerator.java
+++ b/GBDaoGenerator/src/nodomain/freeyourgadget/gadgetbridge/daogen/GBDaoGenerator.java
@@ -139,6 +139,7 @@ public class GBDaoGenerator {
         addPineTimeActivitySample(schema, user, device);
         addPolarH10ActivitySample(schema, user, device);
         addWithingsSteelHRActivitySample(schema, user, device);
+        addSBM67BloodPressureSample(schema, user, device);
         addHybridHRActivitySample(schema, user, device);
         addHybridHRSpo2Sample(schema, user, device);
         addVivomoveHrActivitySample(schema, user, device);
@@ -2243,4 +2244,17 @@ public class GBDaoGenerator {
         sample.addDoubleProperty("valueMgDl").notNull();
         return sample;
     }
+
+    private static Entity addSBM67BloodPressureSample(Schema schema, Entity user, Entity device) {
+        Entity bloodPressureSample = addEntity(schema, "SBM67BloodPressureSample");
+        addCommonTimeSampleProperties("AbstractBloodPressureSample", bloodPressureSample, user, device);
+        addBloodPressureProperies(bloodPressureSample);
+        bloodPressureSample.addIntProperty("userIndex"); //device can store measurements for up to 4 users
+        bloodPressureSample.addIntProperty("meanArterialPressure");
+        bloodPressureSample.addIntProperty("pulse");
+        bloodPressureSample.addIntProperty("readingStatus");
+        bloodPressureSample.addBooleanProperty("heartRhythmDisorder");
+        bloodPressureSample.addBooleanProperty("restingIndicator");
+        return bloodPressureSample;
+    }
 }
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/AbstractDeviceCoordinator.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/AbstractDeviceCoordinator.java
index e17ea2e5a7..001e3106b5 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/AbstractDeviceCoordinator.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/AbstractDeviceCoordinator.java
@@ -85,6 +85,7 @@ import nodomain.freeyourgadget.gadgetbridge.model.ActivitySample;
 import nodomain.freeyourgadget.gadgetbridge.model.ActivitySummaryParser;
 import nodomain.freeyourgadget.gadgetbridge.model.Alarm;
 import nodomain.freeyourgadget.gadgetbridge.model.BatteryConfig;
+import nodomain.freeyourgadget.gadgetbridge.model.BloodPressureSample;
 import nodomain.freeyourgadget.gadgetbridge.model.BodyEnergySample;
 import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;
 import nodomain.freeyourgadget.gadgetbridge.model.HeartRateSample;
@@ -297,6 +298,11 @@ public abstract class AbstractDeviceCoordinator implements DeviceCoordinator {
         return null;
     }
 
+    @Override
+    public TimeSampleProvider<? extends BloodPressureSample> getBloodPressureSampleProvider(final GBDevice device, final DaoSession session) {
+        return null;
+    }
+
     @Override
     @Nullable
     public TimeSampleProvider<? extends StressSample> getStressSampleProvider(GBDevice device, DaoSession session) {
@@ -631,6 +637,11 @@ public abstract class AbstractDeviceCoordinator implements DeviceCoordinator {
         return false;
     }
 
+    @Override
+    public boolean supportsBloodPressureMeasurement(@NonNull final GBDevice device) {
+        return false;
+    }
+
     @Override
     public boolean supportsStressMeasurement(@NonNull GBDevice device) {
         return false;
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/DeviceCoordinator.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/DeviceCoordinator.java
index 116c17512e..c937ed6ec7 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/DeviceCoordinator.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/DeviceCoordinator.java
@@ -56,6 +56,7 @@ import nodomain.freeyourgadget.gadgetbridge.model.ActivitySample;
 import nodomain.freeyourgadget.gadgetbridge.model.ActivitySummaryParser;
 import nodomain.freeyourgadget.gadgetbridge.model.Alarm;
 import nodomain.freeyourgadget.gadgetbridge.model.BatteryConfig;
+import nodomain.freeyourgadget.gadgetbridge.model.BloodPressureSample;
 import nodomain.freeyourgadget.gadgetbridge.model.BodyEnergySample;
 import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;
 import nodomain.freeyourgadget.gadgetbridge.model.HeartRateSample;
@@ -154,6 +155,7 @@ public interface DeviceCoordinator {
         THERMOMETER,
         PV_EQUIPMENT,
         GLUCOSE_METER,
+        BLOOD_PRESSURE_METER,
     }
 
     /**
@@ -315,6 +317,12 @@ public interface DeviceCoordinator {
      */
     boolean supportsHeartRateStats(@NonNull GBDevice device);
 
+    /**
+     * Returns true if blood pressure measurement (systolic, diastolic, pulse) measurement and
+     * fetching is supported by the device (with this coordinator).
+     */
+    boolean supportsBloodPressureMeasurement(@NonNull GBDevice device);
+
     /**
      * Returns true if PAI (Personal Activity Intelligence) measurement and fetching is supported by
      * the device (with this coordinator).
@@ -476,6 +484,11 @@ public interface DeviceCoordinator {
 
     TimeSampleProvider<? extends SleepScoreSample> getSleepScoreProvider(GBDevice device, DaoSession session);
 
+    /**
+     * Returns the sample provider for blood pressure data, for the device being supported.
+     */
+    TimeSampleProvider<? extends BloodPressureSample> getBloodPressureSampleProvider(GBDevice device, DaoSession session);
+
     /**
      * Returns the {@link ActivitySummaryParser} for the device being supported.
      *
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/sbm_67/SBM67BloodPressureSampleProvider.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/sbm_67/SBM67BloodPressureSampleProvider.java
new file mode 100644
index 0000000000..f877dcee92
--- /dev/null
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/sbm_67/SBM67BloodPressureSampleProvider.java
@@ -0,0 +1,56 @@
+/*  Copyright (C) 2023 Daniele Gobbetti
+
+    This file is part of Gadgetbridge.
+
+    Gadgetbridge is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as published
+    by the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+
+    Gadgetbridge is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>. */
+package nodomain.freeyourgadget.gadgetbridge.devices.sbm_67;
+
+import androidx.annotation.NonNull;
+
+import de.greenrobot.dao.AbstractDao;
+import de.greenrobot.dao.Property;
+import nodomain.freeyourgadget.gadgetbridge.devices.AbstractTimeSampleProvider;
+import nodomain.freeyourgadget.gadgetbridge.entities.DaoSession;
+import nodomain.freeyourgadget.gadgetbridge.entities.SBM67BloodPressureSample;
+import nodomain.freeyourgadget.gadgetbridge.entities.SBM67BloodPressureSampleDao;
+import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;
+
+public class SBM67BloodPressureSampleProvider extends AbstractTimeSampleProvider<SBM67BloodPressureSample> {
+    public SBM67BloodPressureSampleProvider(final GBDevice device, final DaoSession session) {
+        super(device, session);
+    }
+
+    @NonNull
+    @Override
+    public AbstractDao<SBM67BloodPressureSample, ?> getSampleDao() {
+        return getSession().getSBM67BloodPressureSampleDao();
+    }
+
+    @NonNull
+    @Override
+    protected Property getTimestampSampleProperty() {
+        return SBM67BloodPressureSampleDao.Properties.Timestamp;
+    }
+
+    @NonNull
+    @Override
+    protected Property getDeviceIdentifierSampleProperty() {
+        return SBM67BloodPressureSampleDao.Properties.DeviceId;
+    }
+
+    @Override
+    public SBM67BloodPressureSample createSample() {
+        return new SBM67BloodPressureSample();
+    }
+}
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/sbm_67/SBM67Coordinator.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/sbm_67/SBM67Coordinator.java
new file mode 100644
index 0000000000..03328282cc
--- /dev/null
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/sbm_67/SBM67Coordinator.java
@@ -0,0 +1,73 @@
+/*  Copyright (C) 2023 Daniele Gobbetti
+
+    This file is part of Gadgetbridge.
+
+    Gadgetbridge is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as published
+    by the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+
+    Gadgetbridge is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>. */
+package nodomain.freeyourgadget.gadgetbridge.devices.sbm_67;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
+import java.util.regex.Pattern;
+
+import nodomain.freeyourgadget.gadgetbridge.R;
+import nodomain.freeyourgadget.gadgetbridge.devices.AbstractBLEDeviceCoordinator;
+import nodomain.freeyourgadget.gadgetbridge.entities.DaoSession;
+import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;
+import nodomain.freeyourgadget.gadgetbridge.service.DeviceSupport;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.sbm_67.SBM67DeviceSupport;
+
+public class SBM67Coordinator extends AbstractBLEDeviceCoordinator {
+    @Nullable
+    @Override
+    protected Pattern getSupportedDeviceName() {
+        return Pattern.compile("^(SBM67|BPM Smart)$", Pattern.CASE_INSENSITIVE);
+    }
+
+    @Override
+    public String getManufacturer() {
+        return "Sanitas";
+    }
+
+    @NonNull
+    @Override
+    public Class<? extends DeviceSupport> getDeviceSupportClass(GBDevice device) {
+        return SBM67DeviceSupport.class;
+    }
+
+    @Override
+    public int getDeviceNameResource() {
+        return R.string.devicetype_sanitas_sbm_67;
+    }
+
+    @Override
+    public DeviceKind getDeviceKind(@NonNull GBDevice device) {
+        return DeviceKind.BLOOD_PRESSURE_METER;
+    }
+
+    @Override
+    public int getBondingStyle() {
+        return BONDING_STYLE_NONE;
+    }
+
+    @Override
+    public boolean supportsBloodPressureMeasurement(@NonNull final GBDevice device) {
+        return true;
+    }
+
+    @Override
+    public SBM67BloodPressureSampleProvider getBloodPressureSampleProvider(GBDevice device, DaoSession session) {
+        return new SBM67BloodPressureSampleProvider(device, session);
+    }
+}
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/model/DeviceType.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/model/DeviceType.java
index 3e4322376f..a922d91594 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/model/DeviceType.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/model/DeviceType.java
@@ -365,6 +365,7 @@ import nodomain.freeyourgadget.gadgetbridge.devices.redmibuds.RedmiBuds6ActiveCo
 import nodomain.freeyourgadget.gadgetbridge.devices.redmibuds.RedmiBuds6ProCoordinator;
 import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi1Coordinator;
 import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi3Coordinator;
+import nodomain.freeyourgadget.gadgetbridge.devices.sbm_67.SBM67Coordinator;
 import nodomain.freeyourgadget.gadgetbridge.devices.scannable.ScannableDeviceCoordinator;
 import nodomain.freeyourgadget.gadgetbridge.devices.shokz.ShokzOpenSwimProCoordinator;
 import nodomain.freeyourgadget.gadgetbridge.devices.smaq2oss.SMAQ2OSSCoordinator;
@@ -881,6 +882,7 @@ public enum DeviceType {
     COOSPO_H9Z(CoospoH9ZCoordinator.class),
     GENERIC_WEIGHT_SCALE(GenericWeightScaleCoordinator.class),
     SOLARFLOW(SolarFlowDeviceCoordinator.class),
+    SBM_67(SBM67Coordinator.class),
     TEST(TestDeviceCoordinator.class);
 
     private DeviceCoordinator coordinator;
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/sbm_67/SBM67DeviceSupport.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/sbm_67/SBM67DeviceSupport.java
new file mode 100644
index 0000000000..6dfd9d117d
--- /dev/null
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/sbm_67/SBM67DeviceSupport.java
@@ -0,0 +1,230 @@
+/*  Copyright (C) 2023 Daniele Gobbetti
+
+    This file is part of Gadgetbridge.
+
+    Gadgetbridge is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as published
+    by the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+
+    Gadgetbridge is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <http://www.gnu.org/licenses/>. */
+package nodomain.freeyourgadget.gadgetbridge.service.devices.sbm_67;
+
+import android.bluetooth.BluetoothGatt;
+import android.bluetooth.BluetoothGattCharacteristic;
+import android.content.BroadcastReceiver;
+import android.content.Context;
+import android.content.Intent;
+import android.content.IntentFilter;
+import android.widget.Toast;
+
+import androidx.localbroadcastmanager.content.LocalBroadcastManager;
+
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
+
+import java.nio.ByteBuffer;
+import java.nio.ByteOrder;
+import java.util.ArrayList;
+import java.util.Calendar;
+import java.util.GregorianCalendar;
+import java.util.List;
+
+import nodomain.freeyourgadget.gadgetbridge.GBApplication;
+import nodomain.freeyourgadget.gadgetbridge.database.DBHandler;
+import nodomain.freeyourgadget.gadgetbridge.database.DBHelper;
+import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventVersionInfo;
+import nodomain.freeyourgadget.gadgetbridge.devices.sbm_67.SBM67BloodPressureSampleProvider;
+import nodomain.freeyourgadget.gadgetbridge.devices.sbm_67.SBM67Coordinator;
+import nodomain.freeyourgadget.gadgetbridge.entities.DaoSession;
+import nodomain.freeyourgadget.gadgetbridge.entities.Device;
+import nodomain.freeyourgadget.gadgetbridge.entities.SBM67BloodPressureSample;
+import nodomain.freeyourgadget.gadgetbridge.entities.User;
+import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;
+import nodomain.freeyourgadget.gadgetbridge.service.btle.AbstractBTLESingleDeviceSupport;
+import nodomain.freeyourgadget.gadgetbridge.service.btle.GattCharacteristic;
+import nodomain.freeyourgadget.gadgetbridge.service.btle.GattService;
+import nodomain.freeyourgadget.gadgetbridge.service.btle.TransactionBuilder;
+import nodomain.freeyourgadget.gadgetbridge.service.btle.actions.SetDeviceStateAction;
+import nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.IntentListener;
+import nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfo;
+import nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfoProfile;
+import nodomain.freeyourgadget.gadgetbridge.util.DeviceHelper;
+import nodomain.freeyourgadget.gadgetbridge.util.GB;
+
+public class SBM67DeviceSupport extends AbstractBTLESingleDeviceSupport {
+    private static final Logger LOG = LoggerFactory.getLogger(nodomain.freeyourgadget.gadgetbridge.service.devices.sbm_67.SBM67DeviceSupport.class);
+
+    private final DeviceInfoProfile<SBM67DeviceSupport> deviceInfoProfile;
+    private final GBDeviceEventVersionInfo versionCmd = new GBDeviceEventVersionInfo();
+
+    private List<SBM67BloodPressureSample> samples;
+
+    public SBM67DeviceSupport() {
+        super(LOG);
+        addSupportedService(GattService.UUID_SERVICE_BLOOD_PRESSURE);
+        addSupportedService(GattService.UUID_SERVICE_DEVICE_INFORMATION);
+
+        samples = new ArrayList<>();
+
+        deviceInfoProfile = new DeviceInfoProfile<>(this);
+        IntentListener mListener = intent -> {
+            String s = intent.getAction();
+            if (DeviceInfoProfile.ACTION_DEVICE_INFO.equals(s)) {
+                DeviceInfo deviceInfo = intent.getParcelableExtra(DeviceInfoProfile.EXTRA_DEVICE_INFO);
+                if (deviceInfo != null) {
+                    handleDeviceInfo(deviceInfo);
+                }
+            }
+        };
+        deviceInfoProfile.addListener(mListener);
+        addSupportedProfile(deviceInfoProfile);
+
+        IntentFilter commandFilter = new IntentFilter();
+        commandFilter.addAction(GBDevice.ACTION_DEVICE_CHANGED);
+        BroadcastReceiver commandReceiver = new BroadcastReceiver() {
+            @Override
+            public void onReceive(Context context, Intent intent) {
+                if (GBDevice.ACTION_DEVICE_CHANGED.equals(intent.getAction())) {
+                    GBDevice.DeviceUpdateSubject subject = (GBDevice.DeviceUpdateSubject) intent.getSerializableExtra(GBDevice.EXTRA_UPDATE_SUBJECT);
+
+                    if (GBDevice.DeviceUpdateSubject.CONNECTION_STATE.equals(subject) &&
+                            GBDevice.State.NOT_CONNECTED.equals(gbDevice.getState()) &&
+                            !samples.isEmpty()) {
+                        // This particular device disconnects automatically once the transfer is finished, hence this method of persisting the samples works, but it's far from ideal
+                        persistSamples();
+                        samples.clear();
+                    }
+                }
+            }
+        };
+        LocalBroadcastManager.getInstance(GBApplication.getContext()).registerReceiver(commandReceiver, commandFilter);
+    }
+
+    /**
+     * Subclasses should populate the given builder to initialize the device (if necessary).
+     *
+     * @param builder
+     * @return the same builder as passed as the argument
+     */
+    @Override
+    protected TransactionBuilder initializeDevice(TransactionBuilder builder) {
+
+        samples = new ArrayList<>();
+
+        deviceInfoProfile.requestDeviceInfo(builder);
+
+        builder.setCallback(this);
+
+        // mark the device as initializing
+        builder.add(new SetDeviceStateAction(getDevice(), GBDevice.State.INITIALIZING, getContext()));
+
+        builder.notify(getCharacteristic(GattCharacteristic.UUID_CHARACTERISTIC_BLOOD_PRESSURE_MEASUREMENT), true);
+
+        // mark the device as initialized
+        builder.add(new SetDeviceStateAction(getDevice(), GBDevice.State.INITIALIZED, getContext()));
+        return builder;
+    }
+
+    private void handleDeviceInfo(nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfo info) {
+        versionCmd.hwVersion = info.getHardwareRevision();
+        versionCmd.fwVersion = info.getFirmwareRevision();
+        handleGBDeviceEvent(versionCmd);
+    }
+
+    @Override
+    public boolean onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, byte[] value) {
+
+        if (GattCharacteristic.UUID_CHARACTERISTIC_BLOOD_PRESSURE_MEASUREMENT.equals(characteristic.getUuid())) {
+            ByteBuffer incoming = ByteBuffer.wrap(value);
+            incoming.order(ByteOrder.LITTLE_ENDIAN);
+
+            final SBM67BloodPressureSample bloodPressureSample = new SBM67BloodPressureSample();
+
+            byte unk = incoming.get();
+            short syst = incoming.getShort();//
+            short dia = incoming.getShort();//
+            if ((unk & 1) != 0) {
+                bloodPressureSample.setBpSystolic((int) ((int) syst * 7.50061683d));
+                bloodPressureSample.setBpDiastolic((int) ((int) dia * 7.50061683d));
+            } else {
+                bloodPressureSample.setBpSystolic((int) syst);
+                bloodPressureSample.setBpDiastolic((int) dia);
+            }
+            short map = incoming.getShort(); //mean arterial pressure
+            bloodPressureSample.setMeanArterialPressure((int) map);
+
+            if ((unk & 2) != 0) {
+                short year = incoming.getShort();
+                byte month = incoming.get();
+                byte day = incoming.get();
+
+                byte hour = incoming.get();
+                byte minute = incoming.get();
+                byte second = incoming.get();
+
+                Calendar c = GregorianCalendar.getInstance();
+                c.set(year, month - 1, day, hour, minute, second);
+
+                bloodPressureSample.setTimestamp(c.getTime().getTime());
+            }
+            byte pulse = incoming.get();//
+            bloodPressureSample.setPulse((int) pulse & 0xff);
+            incoming.get();//skip
+            byte user = incoming.get();//
+            bloodPressureSample.setUserIndex((int) user);
+
+            byte status = incoming.get();//
+            bloodPressureSample.setReadingStatus((int) status);
+            bloodPressureSample.setHeartRhythmDisorder((status & 4) != 0);
+            bloodPressureSample.setRestingIndicator((status & 64) != 0);
+
+            samples.add(bloodPressureSample);
+            return true;
+        }
+
+        return super.onCharacteristicChanged(gatt, characteristic, value);
+    }
+
+
+    protected void persistSamples() {
+
+        try (DBHandler handler = GBApplication.acquireDB()) {
+            final DaoSession session = handler.getDaoSession();
+
+            final Device device = DBHelper.getDevice(getDevice(), session);
+            final User user = DBHelper.getUser(session);
+
+            final SBM67Coordinator coordinator = (SBM67Coordinator) getDevice().getDeviceCoordinator();
+            final SBM67BloodPressureSampleProvider sampleProvider = coordinator.getBloodPressureSampleProvider(getDevice(), session);
+
+            for (final SBM67BloodPressureSample sample : samples) {
+                sample.setDevice(device);
+                sample.setUser(user);
+            }
+
+            LOG.debug("Will persist {} blood pressure samples", samples.size());
+            sampleProvider.addSamples(samples);
+        } catch (final Exception e) {
+            GB.toast(getContext(), "Error saving blood pressure samples", Toast.LENGTH_LONG, GB.ERROR, e);
+            return;
+        }
+
+        return;
+    }
+
+    /**
+     * Returns true if a connection attempt shall be made automatically whenever
+     * needed (e.g. when a notification shall be sent to the device while not connected.
+     */
+    @Override
+    public boolean useAutoConnect() {
+        return false;
+    }
+}
diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
index 0a8bad261a..22f19f190d 100644
--- a/app/src/main/res/values/strings.xml
+++ b/app/src/main/res/values/strings.xml
@@ -3059,6 +3059,7 @@
     <string name="devicetype_galaxybuds_2" translatable="false">Galaxy Buds2</string>
     <string name="devicetype_galaxybuds_2_pro" translatable="false">Galaxy Buds2 Pro</string>
     <string name="devicetype_galaxybuds_3_pro" translatable="false">Galaxy Buds3 Pro</string>
+    <string name="devicetype_sanitas_sbm_67" translatable="false">Sanitas SBM 67</string>
     <string name="nothing_prefs_inear_summary">Play/pause the music depending if you wear the earbuds</string>
     <string name="nothing_prefs_inear_title">In-Ear detection</string>
     <string name="prefs_in_ear_detection_summary">Play calls through your earbuds when they are in your ears</string>
```
-----------------------------------
