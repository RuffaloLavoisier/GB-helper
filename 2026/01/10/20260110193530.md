# Commit: 072cfeab455dfa23a8ebb850af492b813195bdfc
## Message: Garmin GPSMAP 66s: Initial support
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/garmin/gps/GarminGpsmap66sCoordinator.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/model/DeviceType.java

app/src/main/res/values/strings.xml

app/src/test/java/nodomain/freeyourgadget/gadgetbridge/devices/AbstractDeviceCoordinatorTest.java

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/garmin/gps/GarminGpsmap66sCoordinator.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/garmin/gps/GarminGpsmap66sCoordinator.java
new file mode 100644
index 0000000000..e9638c604f
--- /dev/null
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/garmin/gps/GarminGpsmap66sCoordinator.java
@@ -0,0 +1,48 @@
+package nodomain.freeyourgadget.gadgetbridge.devices.garmin.gps;
+
+import androidx.annotation.NonNull;
+
+import java.util.regex.Pattern;
+
+import nodomain.freeyourgadget.gadgetbridge.R;
+import nodomain.freeyourgadget.gadgetbridge.devices.garmin.GarminCoordinator;
+import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;
+
+public class GarminGpsmap66sCoordinator extends GarminCoordinator {
+    @Override
+    public boolean supportsActivityDataFetching(@NonNull final GBDevice device) {
+        // for gps tracks
+        return true;
+    }
+
+    @Override
+    public boolean supportsActivityTracks(@NonNull final GBDevice device) {
+        return true;
+    }
+
+    @Override
+    public boolean supportsWeather(@NonNull final GBDevice device) {
+        return true;
+    }
+
+    @Override
+    public int getBatteryCount(final GBDevice device) {
+        // does not seem to report the battery %
+        return 0;
+    }
+
+    @Override
+    protected Pattern getSupportedDeviceName() {
+        return Pattern.compile("^GPSMAP 66S( #\\d+)?");
+    }
+
+    @Override
+    public int getDeviceNameResource() {
+        return R.string.devicetype_garmin_gpsmap_66s;
+    }
+
+    @Override
+    public DeviceKind getDeviceKind(@NonNull GBDevice device) {
+        return DeviceKind.UNKNOWN;
+    }
+}
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/model/DeviceType.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/model/DeviceType.java
index ae97bf400b..a84fcb4350 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/model/DeviceType.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/model/DeviceType.java
@@ -71,6 +71,7 @@ import nodomain.freeyourgadget.gadgetbridge.devices.garmin.bike.GarminEdge540Coo
 import nodomain.freeyourgadget.gadgetbridge.devices.garmin.bike.GarminEdge840Coordinator;
 import nodomain.freeyourgadget.gadgetbridge.devices.garmin.bike.GarminEdgeExplore2Coordinator;
 import nodomain.freeyourgadget.gadgetbridge.devices.garmin.bike.GarminEdgeExploreCoordinator;
+import nodomain.freeyourgadget.gadgetbridge.devices.garmin.gps.GarminGpsmap66sCoordinator;
 import nodomain.freeyourgadget.gadgetbridge.devices.garmin.hrm.GarminHrmProPlusCoordinator;
 import nodomain.freeyourgadget.gadgetbridge.devices.garmin.gps.GarminETrexSeCoordinator;
 import nodomain.freeyourgadget.gadgetbridge.devices.garmin.gps.GarminInReachMini2;
@@ -612,6 +613,7 @@ public enum DeviceType {
     GARMIN_EDGE_1040(GarminEdge1040Coordinator.class),
     GARMIN_EDGE_EXPLORE(GarminEdgeExploreCoordinator.class),
     GARMIN_EDGE_EXPLORE_2(GarminEdgeExplore2Coordinator.class),
+    GARMIN_GPSMAP_66S(GarminGpsmap66sCoordinator.class),
     GARMIN_ETREX_SE(GarminETrexSeCoordinator.class),
     GARMIN_ENDURO(GarminEnduroCoordinator.class),
     GARMIN_ENDURO_3(GarminEnduro3Coordinator.class),
diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
index e653e51d5e..937b922c3c 100644
--- a/app/src/main/res/values/strings.xml
+++ b/app/src/main/res/values/strings.xml
@@ -1925,6 +1925,7 @@
     <string name="devicetype_garmin_edge_1040" translatable="false">Garmin Edge 1040</string>
     <string name="devicetype_garmin_edge_explore" translatable="false">Garmin Edge Explore</string>
     <string name="devicetype_garmin_edge_explore_2" translatable="false">Garmin Edge Explore 2</string>
+    <string name="devicetype_garmin_gpsmap_66s" translatable="false">Garmin GPSMAP 66s</string>
     <string name="devicetype_garmin_etrex_se" translatable="false">Garmin eTrex SE</string>
     <string name="devicetype_garmin_enduro" translatable="false">Garmin Enduro</string>
     <string name="devicetype_garmin_enduro_3" translatable="false">Garmin Enduro 3</string>
diff --git a/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/devices/AbstractDeviceCoordinatorTest.java b/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/devices/AbstractDeviceCoordinatorTest.java
index 729e682844..99f48387a3 100644
--- a/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/devices/AbstractDeviceCoordinatorTest.java
+++ b/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/devices/AbstractDeviceCoordinatorTest.java
@@ -52,6 +52,8 @@ public class AbstractDeviceCoordinatorTest extends TestBase {
             put("Forerunner 165 Music", DeviceType.GARMIN_FORERUNNER_165_MUSIC);
             put("R60", DeviceType.BLACKVIEW_R60);
             put("eTrex SE", DeviceType.GARMIN_ETREX_SE);
+            put("GPSMAP 66S", DeviceType.GARMIN_GPSMAP_66S); // matrix
+            put("GPSMAP 66S #1234512345", DeviceType.GARMIN_GPSMAP_66S); // matrix
             put("Instinct Tactical", DeviceType.GARMIN_INSTINCT_TACTICAL);
             put("Xiaomi Smart Band 10 8C9F", DeviceType.MIBAND10);
             put("Venu X1", DeviceType.GARMIN_VENU_X1);
```
-----------------------------------
