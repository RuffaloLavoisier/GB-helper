# Commit: f898eb912c9070ed774ab59054da6901ba2732f3
## Message: Penble 2: Fix crash (regression)
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/pebble/ble/PebbleGATTClient.java

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/pebble/ble/PebbleGATTClient.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/pebble/ble/PebbleGATTClient.java
index ab2ee78fc1..5fa83ad6ec 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/pebble/ble/PebbleGATTClient.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/pebble/ble/PebbleGATTClient.java
@@ -25,6 +25,7 @@ import android.bluetooth.BluetoothGatt;
 import android.bluetooth.BluetoothGattCallback;
 import android.bluetooth.BluetoothGattCharacteristic;
 import android.bluetooth.BluetoothGattDescriptor;
+import android.bluetooth.BluetoothGattService;
 import android.content.Context;
 
 import org.slf4j.Logger;
@@ -249,10 +250,15 @@ class PebbleGATTClient extends BluetoothGattCallback {
     }
 
     public void readBatteryCharacteristic() {
-        BluetoothGattCharacteristic characteristic = mBluetoothGatt.getService(GattService.UUID_SERVICE_BATTERY_SERVICE).getCharacteristic(GattCharacteristic.UUID_CHARACTERISTIC_BATTERY_LEVEL);
-        if (characteristic != null) {
-            mBluetoothGatt.readCharacteristic(characteristic);
-        }
+        BluetoothGattService serivce = mBluetoothGatt.getService(GattService.UUID_SERVICE_BATTERY_SERVICE);
+        if (serivce == null)
+            return;
+
+        BluetoothGattCharacteristic characteristic = serivce.getCharacteristic(GattCharacteristic.UUID_CHARACTERISTIC_BATTERY_LEVEL);
+        if (characteristic == null)
+            return;
+
+        mBluetoothGatt.readCharacteristic(characteristic);
     }
 
     private void connectToPebble(BluetoothDevice btDevice) {
```
-----------------------------------
