# Commit: 4d9afdbfb8303b34a6779ef50f9f23d2531deaf6
## Message: GxpParser: forward description, depth and temperature to ActivityPoint
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/gpx/model/GpxTrackPoint.java

app/src/test/java/nodomain/freeyourgadget/gadgetbridge/util/gpx/GPXParserTest.java

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/gpx/model/GpxTrackPoint.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/gpx/model/GpxTrackPoint.java
index 38d8fb99c5..57468e0c74 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/gpx/model/GpxTrackPoint.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/gpx/model/GpxTrackPoint.java
@@ -128,8 +128,19 @@ public class GpxTrackPoint extends GPSCoordinate {
         activityPoint.setTime(time);
         activityPoint.setLocation(this);
         activityPoint.setHeartRate(heartRate);
-        activityPoint.setSpeed(speed);
+        if (!Float.isNaN(speed)) {
+            activityPoint.setSpeed(speed);
+        }
         activityPoint.setCadence(cadence);
+        if (!Double.isNaN(depth)) {
+            activityPoint.setDepth(depth);
+        }
+        if (!Double.isNaN(temperature)) {
+            activityPoint.setTemperature(temperature);
+        }
+        if (description != null && description.length() > 0) {
+            activityPoint.setDescription(description);
+        }
 
         return activityPoint;
     }
diff --git a/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/util/gpx/GPXParserTest.java b/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/util/gpx/GPXParserTest.java
index d29d77ad0b..7fd23853ff 100644
--- a/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/util/gpx/GPXParserTest.java
+++ b/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/util/gpx/GPXParserTest.java
@@ -28,6 +28,7 @@ import java.util.ArrayList;
 import java.util.Date;
 import java.util.List;
 
+import nodomain.freeyourgadget.gadgetbridge.model.ActivityPoint;
 import nodomain.freeyourgadget.gadgetbridge.model.GPSCoordinate;
 import nodomain.freeyourgadget.gadgetbridge.test.TestBase;
 import nodomain.freeyourgadget.gadgetbridge.util.gpx.model.GpxFile;
@@ -170,4 +171,30 @@ public class GPXParserTest extends TestBase {
         Assert.assertEquals(1, file2.getTracks().size());
         Assert.assertEquals(trkpt0, file2.getTracks().get(0).getTrackSegments().get(0).getTrackPoints().get(0));
     }
+
+    @Test
+    public void TestToActivityPoint() throws Exception {
+        final GpxFile file;
+        try (final InputStream gpx = getClass().getResourceAsStream("/TestGpxImport.gpx")) {
+            file = new GpxParser(gpx).getGpxFile();
+        }
+
+        GpxTrackPoint trackpoint = file.getTracks().get(0).getTrackSegments().get(0).getTrackPoints().get(0);
+        ActivityPoint activityPoint = trackpoint.toActivityPoint();
+        Assert.assertNotNull(activityPoint);
+
+        Assert.assertEquals(trackpoint.getAltitude(), activityPoint.getLocation().getAltitude(), 0.0);
+        Assert.assertEquals(trackpoint.getCadence(), activityPoint.getCadence());
+        Assert.assertEquals(trackpoint.getDepth(), activityPoint.getDepth(), 0.0);
+        Assert.assertEquals(trackpoint.getDescription(), activityPoint.getDescription());
+        Assert.assertEquals(trackpoint.getHdop(), activityPoint.getLocation().getHdop(), 0.0);
+        Assert.assertEquals(trackpoint.getHeartRate(), activityPoint.getHeartRate());
+        Assert.assertEquals(trackpoint.getLatitude(), activityPoint.getLocation().getLatitude(), 0.0);
+        Assert.assertEquals(trackpoint.getLongitude(), activityPoint.getLocation().getLongitude(), 0.0);
+        Assert.assertEquals(trackpoint.getPdop(), activityPoint.getLocation().getPdop(), 0.0);
+        Assert.assertEquals(trackpoint.getSpeed(), activityPoint.getSpeed(), 0.0);
+        Assert.assertEquals(trackpoint.getTemperature(), activityPoint.getTemperature(), 0.0);
+        Assert.assertEquals(trackpoint.getTime(), activityPoint.getTime());
+        Assert.assertEquals(trackpoint.getVdop(), activityPoint.getLocation().getVdop(), 0.0);
+    }
 }
```
-----------------------------------
