# Commit: d42466c663333024ca249b6b8a6c457f782d0fcb
## Message: Withings Steel HR: Request MTU before enabling notifications

It looks like enabling notifications before setting the MTU will
sometimes fail, which would leave the device stuck initializing.
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/withingssteelhr/WithingsSteelHRDeviceSupport.java

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/withingssteelhr/WithingsSteelHRDeviceSupport.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/withingssteelhr/WithingsSteelHRDeviceSupport.java
index 396d546cee..bf756dc5a4 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/withingssteelhr/WithingsSteelHRDeviceSupport.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/withingssteelhr/WithingsSteelHRDeviceSupport.java
@@ -184,9 +184,8 @@ public class WithingsSteelHRDeviceSupport extends AbstractBTLESingleDeviceSuppor
         builder.setDeviceState(GBDevice.State.INITIALIZING);
         getDevice().setFirmwareVersion("N/A");
         getDevice().setFirmwareVersion2("N/A");
+        builder.requestMtu(512);
         builder.notify(WithingsUUID.WITHINGS_WRITE_CHARACTERISTIC_UUID, true);
-        logger.debug("Requesting change of MTU...");
-        builder.requestMtu(119);
         return builder;
     }
 
@@ -203,7 +202,7 @@ public class WithingsSteelHRDeviceSupport extends AbstractBTLESingleDeviceSuppor
             return;
         }
 
-        logger.debug("MTU has changed to " + mtu);
+        logger.debug("MTU has changed to {}", mtu);
         mtuSize = mtu;
         if (firstTimeConnect) {
             addSimpleConversationToQueue(new WithingsMessage(WithingsMessageType.INITIAL_CONNECT));
```
-----------------------------------
