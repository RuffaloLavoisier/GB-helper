# Commit: 7f5a6e7f932f6669047e7df554eb9ff7d22dfc06
## Message: Garmin: extend FIT file parsing 3

The encoding of some BIKE_PROFILE fields has changed over the years (UINT8 vs ENUM). Use the modern encoding.
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitFieldCapabilities.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitFileCapabilities.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitLocation.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitMapLayer.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitMesgCapabilities.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitSleepSchedule.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/GlobalFITMessage.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitRecordDataFactory.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitTotals.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitUserProfile.java

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/GlobalFITMessage.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/GlobalFITMessage.java
index c3955537d1..5a9078e481 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/GlobalFITMessage.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/GlobalFITMessage.java
@@ -91,8 +91,11 @@ public class GlobalFITMessage {
             new FieldDefinitionPrimitive(30, BaseType.ENUM, "height_setting", FieldDefinitionFactory.FIELD.MEASUREMENT_SYSTEM),
             new FieldDefinitionPrimitive(31, BaseType.UINT16, "user_running_step_length"),
             new FieldDefinitionPrimitive(32, BaseType.UINT16, "user_walking_step_length"),
+            new FieldDefinitionPrimitive(37, BaseType.UINT16, "ltspeed", 10, 0), // km/h
+            new FieldDefinitionPrimitive(41, BaseType.UINT32, "time_last_lthr_update"),
             new FieldDefinitionPrimitive(47, BaseType.ENUM, "depth_setting", FieldDefinitionFactory.FIELD.MEASUREMENT_SYSTEM),
             new FieldDefinitionPrimitive(49, BaseType.UINT32, "dive_count"),
+            new FieldDefinitionPrimitive(62, BaseType.ENUM, "gender_x"),
             new FieldDefinitionPrimitive(254, BaseType.UINT16, "message_index")
     ));
 
@@ -128,15 +131,15 @@ public class GlobalFITMessage {
             new FieldDefinitionPrimitive(9, BaseType.UINT16, "auto_wheelsize", 1000, 0), // m
             new FieldDefinitionPrimitive(10, BaseType.UINT16, "bike_weight", 10, 0), // kg
             new FieldDefinitionPrimitive(11, BaseType.UINT16, "power_cal_factor", 10, 0), // %
-            new FieldDefinitionPrimitive(12, BaseType.UINT8, "auto_wheel_cal"),
-            new FieldDefinitionPrimitive(13, BaseType.UINT8, "auto_power_zero"),
+            new FieldDefinitionPrimitive(12, BaseType.ENUM, "auto_wheel_cal"),
+            new FieldDefinitionPrimitive(13, BaseType.ENUM, "auto_power_zero"),
             new FieldDefinitionPrimitive(14, BaseType.UINT8, "id"),
-            new FieldDefinitionPrimitive(15, BaseType.UINT8, "spd_enabled"),
-            new FieldDefinitionPrimitive(16, BaseType.UINT8, "cad_enabled"),
-            new FieldDefinitionPrimitive(17, BaseType.UINT8, "spdcad_enabled"),
-            new FieldDefinitionPrimitive(18, BaseType.UINT8, "power_enabled"),
+            new FieldDefinitionPrimitive(15, BaseType.ENUM, "spd_enabled"),
+            new FieldDefinitionPrimitive(16, BaseType.ENUM, "cad_enabled"),
+            new FieldDefinitionPrimitive(17, BaseType.ENUM, "spdcad_enabled"),
+            new FieldDefinitionPrimitive(18, BaseType.ENUM, "power_enabled"),
             new FieldDefinitionPrimitive(19, BaseType.UINT8, "crank_length", 2, -100), // mm
-            new FieldDefinitionPrimitive(20, BaseType.UINT8, "enabled"),
+            new FieldDefinitionPrimitive(20, BaseType.ENUM, "enabled"),
             new FieldDefinitionPrimitive(21, BaseType.UINT8Z, "bike_spd_ant_id_trans_type"),
             new FieldDefinitionPrimitive(22, BaseType.UINT8Z, "bike_cad_ant_id_trans_type"),
             new FieldDefinitionPrimitive(23, BaseType.UINT8Z, "bike_spdcad_ant_id_trans_type"),
@@ -583,6 +586,18 @@ public class GlobalFITMessage {
             new FieldDefinitionPrimitive(254, BaseType.UINT16, "message_index")
     ));
 
+    public static GlobalFITMessage LOCATION = new GlobalFITMessage(29, "LOCATION", Arrays.asList(
+            new FieldDefinitionPrimitive(0, BaseType.STRING, 32, "name"),
+            new FieldDefinitionPrimitive(1, BaseType.SINT32, "position_lat", FieldDefinitionFactory.FIELD.COORDINATE),
+            new FieldDefinitionPrimitive(2, BaseType.SINT32, "position_long", FieldDefinitionFactory.FIELD.COORDINATE),
+            new FieldDefinitionPrimitive(3, BaseType.UINT16, "symbol"),
+            new FieldDefinitionPrimitive(4, BaseType.UINT16, "altitude", 5, 500), // m
+            new FieldDefinitionPrimitive(5, BaseType.UINT16, "enhanced_altitude"),
+            new FieldDefinitionPrimitive(6, BaseType.STRING, "description"),
+            new FieldDefinitionPrimitive(253, BaseType.UINT32, "timestamp", FieldDefinitionFactory.FIELD.TIMESTAMP),
+            new FieldDefinitionPrimitive(254, BaseType.UINT16, "message_index")
+    ));
+
     public static GlobalFITMessage WEIGHT_SCALE = new GlobalFITMessage(30, "WEIGHT_SCALE", Arrays.asList(
             new FieldDefinitionPrimitive(0, BaseType.UINT16, "weight", 100, 0), // kg
             new FieldDefinitionPrimitive(1, BaseType.UINT16, "percent_fat", 100, 0), // %
@@ -627,6 +642,7 @@ public class GlobalFITMessage {
             new FieldDefinitionPrimitive(5, BaseType.UINT16, "sessions"),
             new FieldDefinitionPrimitive(6, BaseType.UINT32, "active_time"), // s
             new FieldDefinitionPrimitive(9, BaseType.UINT8, "sport_index"),
+            new FieldDefinitionPrimitive(10, BaseType.STRING, "activity_profile"),
             new FieldDefinitionPrimitive(253, BaseType.UINT32, "timestamp", FieldDefinitionFactory.FIELD.TIMESTAMP),
             new FieldDefinitionPrimitive(254, BaseType.UINT16, "message_index")
     ));
@@ -648,6 +664,32 @@ public class GlobalFITMessage {
             new FieldDefinitionPrimitive(254, BaseType.UINT16, "message_index")
     ));
 
+    public static GlobalFITMessage FILE_CAPABILITIES = new GlobalFITMessage(37, "FILE_CAPABILITIES", Arrays.asList(
+            new FieldDefinitionPrimitive(0, BaseType.ENUM, "type"),
+            new FieldDefinitionPrimitive(1, BaseType.UINT8Z, "flags"),
+            new FieldDefinitionPrimitive(2, BaseType.STRING, 16, "directory"),
+            new FieldDefinitionPrimitive(3, BaseType.UINT16, "max_count"),
+            new FieldDefinitionPrimitive(4, BaseType.UINT32, "max_size"), // byte
+            new FieldDefinitionPrimitive(254, BaseType.UINT16, "message_index")
+    ));
+
+    public static GlobalFITMessage MESG_CAPABILITIES = new GlobalFITMessage(38, "MESG_CAPABILITIES", Arrays.asList(
+            new FieldDefinitionPrimitive(0, BaseType.ENUM, "file"),
+            new FieldDefinitionPrimitive(1, BaseType.UINT16, "mesg_num"),
+            new FieldDefinitionPrimitive(2, BaseType.ENUM, "count_type"),
+            new FieldDefinitionPrimitive(3, BaseType.UINT16, "max_count"),
+            new FieldDefinitionPrimitive(4, BaseType.UINT16, "count"),
+            new FieldDefinitionPrimitive(254, BaseType.UINT16, "message_index")
+    ));
+
+    public static GlobalFITMessage FIELD_CAPABILITIES = new GlobalFITMessage(39, "FIELD_CAPABILITIES", Arrays.asList(
+            new FieldDefinitionPrimitive(0, BaseType.ENUM, "file"),
+            new FieldDefinitionPrimitive(1, BaseType.UINT16, "mesg_num"),
+            new FieldDefinitionPrimitive(2, BaseType.UINT8, "field_num"),
+            new FieldDefinitionPrimitive(3, BaseType.UINT16, "count"),
+            new FieldDefinitionPrimitive(254, BaseType.UINT16, "message_index")
+    ));
+
     public static GlobalFITMessage FILE_CREATOR = new GlobalFITMessage(49, "FILE_CREATOR", Arrays.asList(
             new FieldDefinitionPrimitive(0, BaseType.UINT16, "software_version"),
             new FieldDefinitionPrimitive(1, BaseType.UINT8, "hardware_version")
@@ -705,6 +747,22 @@ public class GlobalFITMessage {
             new FieldDefinitionPrimitive(253, BaseType.UINT32, "timestamp", FieldDefinitionFactory.FIELD.TIMESTAMP)
     ));
 
+    public static GlobalFITMessage MAP_LAYER = new GlobalFITMessage(70, "MAP_LAYER", Arrays.asList(
+            new FieldDefinitionPrimitive(2, BaseType.ENUM, "relief_shading"),
+            new FieldDefinitionPrimitive(11, BaseType.ENUM, "orientation"),
+            new FieldDefinitionPrimitive(13, BaseType.ENUM, "user_locations"),
+            new FieldDefinitionPrimitive(14, BaseType.ENUM, "auto_zoom"),
+            new FieldDefinitionPrimitive(15, BaseType.ENUM, "guide_text"),
+            new FieldDefinitionPrimitive(16, BaseType.ENUM, "track_log"),
+            new FieldDefinitionPrimitive(20, BaseType.ENUM, "courses"),
+            new FieldDefinitionPrimitive(23, BaseType.ENUM, "spot_soundings"),
+            new FieldDefinitionPrimitive(24, BaseType.ENUM, "light_sectors"),
+            new FieldDefinitionPrimitive(27, BaseType.ENUM, "segments"),
+            new FieldDefinitionPrimitive(28, BaseType.ENUM, "contours"),
+            new FieldDefinitionPrimitive(31, BaseType.ENUM, "popularity"),
+            new FieldDefinitionPrimitive(253, BaseType.UINT32, "timestamp", FieldDefinitionFactory.FIELD.TIMESTAMP)
+    ));
+
     public static GlobalFITMessage TRAINING_FILE = new GlobalFITMessage(72, "TRAINING_FILE", Arrays.asList(
             new FieldDefinitionPrimitive(0, BaseType.ENUM, "type"),
             new FieldDefinitionPrimitive(1, BaseType.UINT16, "manufacturer"),
@@ -1365,6 +1423,12 @@ public class GlobalFITMessage {
             new FieldDefinitionPrimitive(253, BaseType.UINT32, "timestamp", FieldDefinitionFactory.FIELD.TIMESTAMP)
     ));
 
+    public static GlobalFITMessage SLEEP_SCHEDULE = new GlobalFITMessage(379, "SLEEP_SCHEDULE", Arrays.asList(
+            new FieldDefinitionPrimitive(0, BaseType.UINT32, "bed_time"),
+            new FieldDefinitionPrimitive(1, BaseType.UINT32, "wake_time"),
+            new FieldDefinitionPrimitive(254, BaseType.UINT16, "message_index")
+    ));
+
     public static GlobalFITMessage HSA_CONFIGURATION_DATA = new GlobalFITMessage(389, "HSA_CONFIGURATION_DATA", Arrays.asList(
             new FieldDefinitionPrimitive(0, BaseType.BASE_TYPE_BYTE, "data", FieldDefinitionFactory.FIELD.ARRAY),
             new FieldDefinitionPrimitive(1, BaseType.UINT8, "data_size"),
@@ -1427,16 +1491,21 @@ public class GlobalFITMessage {
         put(23, DEVICE_INFO);
         put(26, WORKOUT);
         put(27, WORKOUT_STEP);
+        put(29, LOCATION);
         put(30, WEIGHT_SCALE);
         put(31, COURSE);
         put(32, COURSE_POINT);
         put(33, TOTALS);
         put(34, ACTIVITY);
         put(35, SOFTWARE);
+        put(37, FILE_CAPABILITIES);
+        put(38, MESG_CAPABILITIES);
+        put(39, FIELD_CAPABILITIES);
         put(49, FILE_CREATOR);
         put(51, BLOOD_PRESSURE);
         put(53, SPEED_ZONE);
         put(55, MONITORING);
+        put(70, MAP_LAYER);
         put(72, TRAINING_FILE);
         put(78, HRV);
         put(79, USER_METRICS);
@@ -1502,6 +1571,7 @@ public class GlobalFITMessage {
         put(371, HRV_VALUE);
         put(375, DEVICE_AUX_BATTERY_INFO);
         put(378, TRAINING_LOAD);
+        put(379, SLEEP_SCHEDULE);
         put(389, HSA_CONFIGURATION_DATA);
         put(394, CPE_STATUS);
         put(397, SKIN_TEMP_RAW);
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitFieldCapabilities.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitFieldCapabilities.java
new file mode 100644
index 0000000000..b4e6385e3b
--- /dev/null
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitFieldCapabilities.java
@@ -0,0 +1,104 @@
+/*  Copyright (C) 2025 Freeyourgadget
+
+    This file is part of Gadgetbridge.
+
+    Gadgetbridge is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as published
+    by the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+
+    Gadgetbridge is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <https://www.gnu.org/licenses/>. */
+package nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.messages;
+
+import androidx.annotation.Nullable;
+
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.FitRecordDataBuilder;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordData;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordDefinition;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordHeader;
+
+/**
+ * WARNING: This class was auto-generated, please avoid modifying it directly.
+ * See {@link nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.codegen.FitCodeGen}
+ * @noinspection unused
+ */
+public class FitFieldCapabilities extends RecordData {
+    public FitFieldCapabilities(final RecordDefinition recordDefinition, final RecordHeader recordHeader) {
+        super(recordDefinition, recordHeader);
+
+        final int globalNumber = recordDefinition.getGlobalFITMessage().getNumber();
+        if (globalNumber != 39) {
+            throw new IllegalArgumentException("FitFieldCapabilities expects global messages of " + 39 + ", got " + globalNumber);
+        }
+    }
+
+    @Nullable
+    public Integer getFile() {
+        return (Integer) getFieldByNumber(0);
+    }
+
+    @Nullable
+    public Integer getMesgNum() {
+        return (Integer) getFieldByNumber(1);
+    }
+
+    @Nullable
+    public Integer getFieldNum() {
+        return (Integer) getFieldByNumber(2);
+    }
+
+    @Nullable
+    public Integer getCount() {
+        return (Integer) getFieldByNumber(3);
+    }
+
+    @Nullable
+    public Integer getMessageIndex() {
+        return (Integer) getFieldByNumber(254);
+    }
+
+    /**
+     * @noinspection unused
+     */
+    public static class Builder extends FitRecordDataBuilder {
+        public Builder() {
+            super(39);
+        }
+
+        public Builder setFile(final Integer value) {
+            setFieldByNumber(0, value);
+            return this;
+        }
+
+        public Builder setMesgNum(final Integer value) {
+            setFieldByNumber(1, value);
+            return this;
+        }
+
+        public Builder setFieldNum(final Integer value) {
+            setFieldByNumber(2, value);
+            return this;
+        }
+
+        public Builder setCount(final Integer value) {
+            setFieldByNumber(3, value);
+            return this;
+        }
+
+        public Builder setMessageIndex(final Integer value) {
+            setFieldByNumber(254, value);
+            return this;
+        }
+
+        @Override
+        public FitFieldCapabilities build() {
+            return (FitFieldCapabilities) super.build();
+        }
+    }
+}
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitFileCapabilities.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitFileCapabilities.java
new file mode 100644
index 0000000000..efd75c9f6c
--- /dev/null
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitFileCapabilities.java
@@ -0,0 +1,114 @@
+/*  Copyright (C) 2025 Freeyourgadget
+
+    This file is part of Gadgetbridge.
+
+    Gadgetbridge is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as published
+    by the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+
+    Gadgetbridge is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <https://www.gnu.org/licenses/>. */
+package nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.messages;
+
+import androidx.annotation.Nullable;
+
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.FitRecordDataBuilder;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordData;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordDefinition;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordHeader;
+
+/**
+ * WARNING: This class was auto-generated, please avoid modifying it directly.
+ * See {@link nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.codegen.FitCodeGen}
+ * @noinspection unused
+ */
+public class FitFileCapabilities extends RecordData {
+    public FitFileCapabilities(final RecordDefinition recordDefinition, final RecordHeader recordHeader) {
+        super(recordDefinition, recordHeader);
+
+        final int globalNumber = recordDefinition.getGlobalFITMessage().getNumber();
+        if (globalNumber != 37) {
+            throw new IllegalArgumentException("FitFileCapabilities expects global messages of " + 37 + ", got " + globalNumber);
+        }
+    }
+
+    @Nullable
+    public Integer getType() {
+        return (Integer) getFieldByNumber(0);
+    }
+
+    @Nullable
+    public Integer getFlags() {
+        return (Integer) getFieldByNumber(1);
+    }
+
+    @Nullable
+    public String getDirectory() {
+        return (String) getFieldByNumber(2);
+    }
+
+    @Nullable
+    public Integer getMaxCount() {
+        return (Integer) getFieldByNumber(3);
+    }
+
+    @Nullable
+    public Long getMaxSize() {
+        return (Long) getFieldByNumber(4);
+    }
+
+    @Nullable
+    public Integer getMessageIndex() {
+        return (Integer) getFieldByNumber(254);
+    }
+
+    /**
+     * @noinspection unused
+     */
+    public static class Builder extends FitRecordDataBuilder {
+        public Builder() {
+            super(37);
+        }
+
+        public Builder setType(final Integer value) {
+            setFieldByNumber(0, value);
+            return this;
+        }
+
+        public Builder setFlags(final Integer value) {
+            setFieldByNumber(1, value);
+            return this;
+        }
+
+        public Builder setDirectory(final String value) {
+            setFieldByNumber(2, value);
+            return this;
+        }
+
+        public Builder setMaxCount(final Integer value) {
+            setFieldByNumber(3, value);
+            return this;
+        }
+
+        public Builder setMaxSize(final Long value) {
+            setFieldByNumber(4, value);
+            return this;
+        }
+
+        public Builder setMessageIndex(final Integer value) {
+            setFieldByNumber(254, value);
+            return this;
+        }
+
+        @Override
+        public FitFileCapabilities build() {
+            return (FitFileCapabilities) super.build();
+        }
+    }
+}
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitLocation.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitLocation.java
new file mode 100644
index 0000000000..a1ec44e155
--- /dev/null
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitLocation.java
@@ -0,0 +1,144 @@
+/*  Copyright (C) 2025 Freeyourgadget
+
+    This file is part of Gadgetbridge.
+
+    Gadgetbridge is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as published
+    by the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+
+    Gadgetbridge is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <https://www.gnu.org/licenses/>. */
+package nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.messages;
+
+import androidx.annotation.Nullable;
+
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.FitRecordDataBuilder;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordData;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordDefinition;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordHeader;
+
+/**
+ * WARNING: This class was auto-generated, please avoid modifying it directly.
+ * See {@link nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.codegen.FitCodeGen}
+ * @noinspection unused
+ */
+public class FitLocation extends RecordData {
+    public FitLocation(final RecordDefinition recordDefinition, final RecordHeader recordHeader) {
+        super(recordDefinition, recordHeader);
+
+        final int globalNumber = recordDefinition.getGlobalFITMessage().getNumber();
+        if (globalNumber != 29) {
+            throw new IllegalArgumentException("FitLocation expects global messages of " + 29 + ", got " + globalNumber);
+        }
+    }
+
+    @Nullable
+    public String getName() {
+        return (String) getFieldByNumber(0);
+    }
+
+    @Nullable
+    public Double getPositionLat() {
+        return (Double) getFieldByNumber(1);
+    }
+
+    @Nullable
+    public Double getPositionLong() {
+        return (Double) getFieldByNumber(2);
+    }
+
+    @Nullable
+    public Integer getSymbol() {
+        return (Integer) getFieldByNumber(3);
+    }
+
+    @Nullable
+    public Float getAltitude() {
+        return (Float) getFieldByNumber(4);
+    }
+
+    @Nullable
+    public Integer getEnhancedAltitude() {
+        return (Integer) getFieldByNumber(5);
+    }
+
+    @Nullable
+    public String getDescription() {
+        return (String) getFieldByNumber(6);
+    }
+
+    @Nullable
+    public Long getTimestamp() {
+        return (Long) getFieldByNumber(253);
+    }
+
+    @Nullable
+    public Integer getMessageIndex() {
+        return (Integer) getFieldByNumber(254);
+    }
+
+    /**
+     * @noinspection unused
+     */
+    public static class Builder extends FitRecordDataBuilder {
+        public Builder() {
+            super(29);
+        }
+
+        public Builder setName(final String value) {
+            setFieldByNumber(0, value);
+            return this;
+        }
+
+        public Builder setPositionLat(final Double value) {
+            setFieldByNumber(1, value);
+            return this;
+        }
+
+        public Builder setPositionLong(final Double value) {
+            setFieldByNumber(2, value);
+            return this;
+        }
+
+        public Builder setSymbol(final Integer value) {
+            setFieldByNumber(3, value);
+            return this;
+        }
+
+        public Builder setAltitude(final Float value) {
+            setFieldByNumber(4, value);
+            return this;
+        }
+
+        public Builder setEnhancedAltitude(final Integer value) {
+            setFieldByNumber(5, value);
+            return this;
+        }
+
+        public Builder setDescription(final String value) {
+            setFieldByNumber(6, value);
+            return this;
+        }
+
+        public Builder setTimestamp(final Long value) {
+            setFieldByNumber(253, value);
+            return this;
+        }
+
+        public Builder setMessageIndex(final Integer value) {
+            setFieldByNumber(254, value);
+            return this;
+        }
+
+        @Override
+        public FitLocation build() {
+            return (FitLocation) super.build();
+        }
+    }
+}
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitMapLayer.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitMapLayer.java
new file mode 100644
index 0000000000..9a7e91282c
--- /dev/null
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitMapLayer.java
@@ -0,0 +1,184 @@
+/*  Copyright (C) 2025 Freeyourgadget
+
+    This file is part of Gadgetbridge.
+
+    Gadgetbridge is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as published
+    by the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+
+    Gadgetbridge is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <https://www.gnu.org/licenses/>. */
+package nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.messages;
+
+import androidx.annotation.Nullable;
+
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.FitRecordDataBuilder;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordData;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordDefinition;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordHeader;
+
+/**
+ * WARNING: This class was auto-generated, please avoid modifying it directly.
+ * See {@link nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.codegen.FitCodeGen}
+ * @noinspection unused
+ */
+public class FitMapLayer extends RecordData {
+    public FitMapLayer(final RecordDefinition recordDefinition, final RecordHeader recordHeader) {
+        super(recordDefinition, recordHeader);
+
+        final int globalNumber = recordDefinition.getGlobalFITMessage().getNumber();
+        if (globalNumber != 70) {
+            throw new IllegalArgumentException("FitMapLayer expects global messages of " + 70 + ", got " + globalNumber);
+        }
+    }
+
+    @Nullable
+    public Integer getReliefShading() {
+        return (Integer) getFieldByNumber(2);
+    }
+
+    @Nullable
+    public Integer getOrientation() {
+        return (Integer) getFieldByNumber(11);
+    }
+
+    @Nullable
+    public Integer getUserLocations() {
+        return (Integer) getFieldByNumber(13);
+    }
+
+    @Nullable
+    public Integer getAutoZoom() {
+        return (Integer) getFieldByNumber(14);
+    }
+
+    @Nullable
+    public Integer getGuideText() {
+        return (Integer) getFieldByNumber(15);
+    }
+
+    @Nullable
+    public Integer getTrackLog() {
+        return (Integer) getFieldByNumber(16);
+    }
+
+    @Nullable
+    public Integer getCourses() {
+        return (Integer) getFieldByNumber(20);
+    }
+
+    @Nullable
+    public Integer getSpotSoundings() {
+        return (Integer) getFieldByNumber(23);
+    }
+
+    @Nullable
+    public Integer getLightSectors() {
+        return (Integer) getFieldByNumber(24);
+    }
+
+    @Nullable
+    public Integer getSegments() {
+        return (Integer) getFieldByNumber(27);
+    }
+
+    @Nullable
+    public Integer getContours() {
+        return (Integer) getFieldByNumber(28);
+    }
+
+    @Nullable
+    public Integer getPopularity() {
+        return (Integer) getFieldByNumber(31);
+    }
+
+    @Nullable
+    public Long getTimestamp() {
+        return (Long) getFieldByNumber(253);
+    }
+
+    /**
+     * @noinspection unused
+     */
+    public static class Builder extends FitRecordDataBuilder {
+        public Builder() {
+            super(70);
+        }
+
+        public Builder setReliefShading(final Integer value) {
+            setFieldByNumber(2, value);
+            return this;
+        }
+
+        public Builder setOrientation(final Integer value) {
+            setFieldByNumber(11, value);
+            return this;
+        }
+
+        public Builder setUserLocations(final Integer value) {
+            setFieldByNumber(13, value);
+            return this;
+        }
+
+        public Builder setAutoZoom(final Integer value) {
+            setFieldByNumber(14, value);
+            return this;
+        }
+
+        public Builder setGuideText(final Integer value) {
+            setFieldByNumber(15, value);
+            return this;
+        }
+
+        public Builder setTrackLog(final Integer value) {
+            setFieldByNumber(16, value);
+            return this;
+        }
+
+        public Builder setCourses(final Integer value) {
+            setFieldByNumber(20, value);
+            return this;
+        }
+
+        public Builder setSpotSoundings(final Integer value) {
+            setFieldByNumber(23, value);
+            return this;
+        }
+
+        public Builder setLightSectors(final Integer value) {
+            setFieldByNumber(24, value);
+            return this;
+        }
+
+        public Builder setSegments(final Integer value) {
+            setFieldByNumber(27, value);
+            return this;
+        }
+
+        public Builder setContours(final Integer value) {
+            setFieldByNumber(28, value);
+            return this;
+        }
+
+        public Builder setPopularity(final Integer value) {
+            setFieldByNumber(31, value);
+            return this;
+        }
+
+        public Builder setTimestamp(final Long value) {
+            setFieldByNumber(253, value);
+            return this;
+        }
+
+        @Override
+        public FitMapLayer build() {
+            return (FitMapLayer) super.build();
+        }
+    }
+}
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitMesgCapabilities.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitMesgCapabilities.java
new file mode 100644
index 0000000000..c072bda54d
--- /dev/null
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitMesgCapabilities.java
@@ -0,0 +1,114 @@
+/*  Copyright (C) 2025 Freeyourgadget
+
+    This file is part of Gadgetbridge.
+
+    Gadgetbridge is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as published
+    by the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+
+    Gadgetbridge is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <https://www.gnu.org/licenses/>. */
+package nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.messages;
+
+import androidx.annotation.Nullable;
+
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.FitRecordDataBuilder;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordData;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordDefinition;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordHeader;
+
+/**
+ * WARNING: This class was auto-generated, please avoid modifying it directly.
+ * See {@link nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.codegen.FitCodeGen}
+ * @noinspection unused
+ */
+public class FitMesgCapabilities extends RecordData {
+    public FitMesgCapabilities(final RecordDefinition recordDefinition, final RecordHeader recordHeader) {
+        super(recordDefinition, recordHeader);
+
+        final int globalNumber = recordDefinition.getGlobalFITMessage().getNumber();
+        if (globalNumber != 38) {
+            throw new IllegalArgumentException("FitMesgCapabilities expects global messages of " + 38 + ", got " + globalNumber);
+        }
+    }
+
+    @Nullable
+    public Integer getFile() {
+        return (Integer) getFieldByNumber(0);
+    }
+
+    @Nullable
+    public Integer getMesgNum() {
+        return (Integer) getFieldByNumber(1);
+    }
+
+    @Nullable
+    public Integer getCountType() {
+        return (Integer) getFieldByNumber(2);
+    }
+
+    @Nullable
+    public Integer getMaxCount() {
+        return (Integer) getFieldByNumber(3);
+    }
+
+    @Nullable
+    public Integer getCount() {
+        return (Integer) getFieldByNumber(4);
+    }
+
+    @Nullable
+    public Integer getMessageIndex() {
+        return (Integer) getFieldByNumber(254);
+    }
+
+    /**
+     * @noinspection unused
+     */
+    public static class Builder extends FitRecordDataBuilder {
+        public Builder() {
+            super(38);
+        }
+
+        public Builder setFile(final Integer value) {
+            setFieldByNumber(0, value);
+            return this;
+        }
+
+        public Builder setMesgNum(final Integer value) {
+            setFieldByNumber(1, value);
+            return this;
+        }
+
+        public Builder setCountType(final Integer value) {
+            setFieldByNumber(2, value);
+            return this;
+        }
+
+        public Builder setMaxCount(final Integer value) {
+            setFieldByNumber(3, value);
+            return this;
+        }
+
+        public Builder setCount(final Integer value) {
+            setFieldByNumber(4, value);
+            return this;
+        }
+
+        public Builder setMessageIndex(final Integer value) {
+            setFieldByNumber(254, value);
+            return this;
+        }
+
+        @Override
+        public FitMesgCapabilities build() {
+            return (FitMesgCapabilities) super.build();
+        }
+    }
+}
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitRecordDataFactory.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitRecordDataFactory.java
index fe17bd1cfd..44aee578ff 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitRecordDataFactory.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitRecordDataFactory.java
@@ -37,16 +37,21 @@ public class FitRecordDataFactory {
             case 23 -> new FitDeviceInfo(recordDefinition, recordHeader);
             case 26 -> new FitWorkout(recordDefinition, recordHeader);
             case 27 -> new FitWorkoutStep(recordDefinition, recordHeader);
+            case 29 -> new FitLocation(recordDefinition, recordHeader);
             case 30 -> new FitWeightScale(recordDefinition, recordHeader);
             case 31 -> new FitCourse(recordDefinition, recordHeader);
             case 32 -> new FitCoursePoint(recordDefinition, recordHeader);
             case 33 -> new FitTotals(recordDefinition, recordHeader);
             case 34 -> new FitActivity(recordDefinition, recordHeader);
             case 35 -> new FitSoftware(recordDefinition, recordHeader);
+            case 37 -> new FitFileCapabilities(recordDefinition, recordHeader);
+            case 38 -> new FitMesgCapabilities(recordDefinition, recordHeader);
+            case 39 -> new FitFieldCapabilities(recordDefinition, recordHeader);
             case 49 -> new FitFileCreator(recordDefinition, recordHeader);
             case 51 -> new FitBloodPressure(recordDefinition, recordHeader);
             case 53 -> new FitSpeedZone(recordDefinition, recordHeader);
             case 55 -> new FitMonitoring(recordDefinition, recordHeader);
+            case 70 -> new FitMapLayer(recordDefinition, recordHeader);
             case 72 -> new FitTrainingFile(recordDefinition, recordHeader);
             case 78 -> new FitHrv(recordDefinition, recordHeader);
             case 79 -> new FitUserMetrics(recordDefinition, recordHeader);
@@ -112,6 +117,7 @@ public class FitRecordDataFactory {
             case 371 -> new FitHrvValue(recordDefinition, recordHeader);
             case 375 -> new FitDeviceAuxBatteryInfo(recordDefinition, recordHeader);
             case 378 -> new FitTrainingLoad(recordDefinition, recordHeader);
+            case 379 -> new FitSleepSchedule(recordDefinition, recordHeader);
             case 389 -> new FitHsaConfigurationData(recordDefinition, recordHeader);
             case 394 -> new FitCpeStatus(recordDefinition, recordHeader);
             case 397 -> new FitSkinTempRaw(recordDefinition, recordHeader);
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitSleepSchedule.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitSleepSchedule.java
new file mode 100644
index 0000000000..0912ac6c92
--- /dev/null
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitSleepSchedule.java
@@ -0,0 +1,84 @@
+/*  Copyright (C) 2025 Freeyourgadget
+
+    This file is part of Gadgetbridge.
+
+    Gadgetbridge is free software: you can redistribute it and/or modify
+    it under the terms of the GNU Affero General Public License as published
+    by the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+
+    Gadgetbridge is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU Affero General Public License for more details.
+
+    You should have received a copy of the GNU Affero General Public License
+    along with this program.  If not, see <https://www.gnu.org/licenses/>. */
+package nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.messages;
+
+import androidx.annotation.Nullable;
+
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.FitRecordDataBuilder;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordData;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordDefinition;
+import nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.RecordHeader;
+
+/**
+ * WARNING: This class was auto-generated, please avoid modifying it directly.
+ * See {@link nodomain.freeyourgadget.gadgetbridge.service.devices.garmin.fit.codegen.FitCodeGen}
+ * @noinspection unused
+ */
+public class FitSleepSchedule extends RecordData {
+    public FitSleepSchedule(final RecordDefinition recordDefinition, final RecordHeader recordHeader) {
+        super(recordDefinition, recordHeader);
+
+        final int globalNumber = recordDefinition.getGlobalFITMessage().getNumber();
+        if (globalNumber != 379) {
+            throw new IllegalArgumentException("FitSleepSchedule expects global messages of " + 379 + ", got " + globalNumber);
+        }
+    }
+
+    @Nullable
+    public Long getBedTime() {
+        return (Long) getFieldByNumber(0);
+    }
+
+    @Nullable
+    public Long getWakeTime() {
+        return (Long) getFieldByNumber(1);
+    }
+
+    @Nullable
+    public Integer getMessageIndex() {
+        return (Integer) getFieldByNumber(254);
+    }
+
+    /**
+     * @noinspection unused
+     */
+    public static class Builder extends FitRecordDataBuilder {
+        public Builder() {
+            super(379);
+        }
+
+        public Builder setBedTime(final Long value) {
+            setFieldByNumber(0, value);
+            return this;
+        }
+
+        public Builder setWakeTime(final Long value) {
+            setFieldByNumber(1, value);
+            return this;
+        }
+
+        public Builder setMessageIndex(final Integer value) {
+            setFieldByNumber(254, value);
+            return this;
+        }
+
+        @Override
+        public FitSleepSchedule build() {
+            return (FitSleepSchedule) super.build();
+        }
+    }
+}
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitTotals.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitTotals.java
index 463094bc8e..fb7e576b25 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitTotals.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitTotals.java
@@ -78,6 +78,11 @@ public class FitTotals extends RecordData {
         return (Integer) getFieldByNumber(9);
     }
 
+    @Nullable
+    public String getActivityProfile() {
+        return (String) getFieldByNumber(10);
+    }
+
     @Nullable
     public Long getTimestamp() {
         return (Long) getFieldByNumber(253);
@@ -136,6 +141,11 @@ public class FitTotals extends RecordData {
             return this;
         }
 
+        public Builder setActivityProfile(final String value) {
+            setFieldByNumber(10, value);
+            return this;
+        }
+
         public Builder setTimestamp(final Long value) {
             setFieldByNumber(253, value);
             return this;
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitUserProfile.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitUserProfile.java
index 488c95ad7d..7f336f259a 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitUserProfile.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/fit/messages/FitUserProfile.java
@@ -175,6 +175,16 @@ public class FitUserProfile extends RecordData {
         return (Integer) getFieldByNumber(32);
     }
 
+    @Nullable
+    public Float getLtspeed() {
+        return (Float) getFieldByNumber(37);
+    }
+
+    @Nullable
+    public Long getTimeLastLthrUpdate() {
+        return (Long) getFieldByNumber(41);
+    }
+
     @Nullable
     public Type getDepthSetting() {
         return (Type) getFieldByNumber(47);
@@ -185,6 +195,11 @@ public class FitUserProfile extends RecordData {
         return (Long) getFieldByNumber(49);
     }
 
+    @Nullable
+    public Integer getGenderX() {
+        return (Integer) getFieldByNumber(62);
+    }
+
     @Nullable
     public Integer getMessageIndex() {
         return (Integer) getFieldByNumber(254);
@@ -333,6 +348,16 @@ public class FitUserProfile extends RecordData {
             return this;
         }
 
+        public Builder setLtspeed(final Float value) {
+            setFieldByNumber(37, value);
+            return this;
+        }
+
+        public Builder setTimeLastLthrUpdate(final Long value) {
+            setFieldByNumber(41, value);
+            return this;
+        }
+
         public Builder setDepthSetting(final Type value) {
             setFieldByNumber(47, value);
             return this;
@@ -343,6 +368,11 @@ public class FitUserProfile extends RecordData {
             return this;
         }
 
+        public Builder setGenderX(final Integer value) {
+            setFieldByNumber(62, value);
+            return this;
+        }
+
         public Builder setMessageIndex(final Integer value) {
             setFieldByNumber(254, value);
             return this;
```
-----------------------------------
