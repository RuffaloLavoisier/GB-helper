# Commit: c51b404b45a8eab696ea3c9bd4898d2b0c4a325e
## Message: charts: follow syste, font scale settings, more contrast indicator
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SimpleSleepDetailsOverlay.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SleepDetailsOverlay.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SleepDetailsView.java

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SimpleSleepDetailsOverlay.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SimpleSleepDetailsOverlay.java
index bc82a27f4b..a9ab839aca 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SimpleSleepDetailsOverlay.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SimpleSleepDetailsOverlay.java
@@ -77,9 +77,11 @@ public class SimpleSleepDetailsOverlay implements SleepDetailsOverlay {
     }
 
     @Override
-    public void init(int horizontalLineCount) {
+    public void init(float scaleTextSize, float labelTextSize, int horizontalLineCount) {
         this.horizontalLineCount = horizontalLineCount;
         labels = data.getYLabels(horizontalLineCount);
+        labelPaint.setTextSize(labelTextSize);
+        scalePaint.setTextSize(scaleTextSize);
     }
 
     @Override
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SleepDetailsOverlay.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SleepDetailsOverlay.java
index 90160931e5..4dad42194c 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SleepDetailsOverlay.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SleepDetailsOverlay.java
@@ -20,7 +20,7 @@ import android.graphics.Canvas;
 
 public interface SleepDetailsOverlay {
 
-    void init(int horizontalLineCount);
+    void init(float scaleTextSize, float labelTextSize, int horizontalLineCount);
 
     void drawOverlayScale(Canvas canvas, int lineSpacing, int chartTopStart, int x);
 
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SleepDetailsView.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SleepDetailsView.java
index 29ea396b55..d1e809a963 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SleepDetailsView.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/charts/sleep/SleepDetailsView.java
@@ -99,7 +99,9 @@ public class SleepDetailsView extends View {
 
     private final int overlayAlpha = 128;
 
-    private final int infoTextSize = 25;
+    private int infoTextSize = 25;
+
+    private int scaleTextSize = 25;
 
     private final float cornerRadius = 10.0F;
 
@@ -132,6 +134,11 @@ public class SleepDetailsView extends View {
         horizontalLineCount = 8;
         heightUnit = (float) (1.0 / 8);
 
+        float scale = getResources().getConfiguration().fontScale;
+
+        infoTextSize = (int) (25 * scale);
+        scaleTextSize = (int) (25 * scale);
+
         gridPaint.setColor(Color.GRAY);
         gridPaint.setStrokeWidth(1.0F);
         gridPaint.setStrokeCap(Paint.Cap.ROUND);
@@ -144,17 +151,17 @@ public class SleepDetailsView extends View {
 
         timeInfoTextPaint.setColor(Color.GRAY);
         timeInfoTextPaint.setTextAlign(Paint.Align.CENTER);
-        timeInfoTextPaint.setTextSize(25);
+        timeInfoTextPaint.setTextSize(scaleTextSize);
 
         infoTextPaint.setColor(Color.GRAY);
         infoTextPaint.setTextAlign(Paint.Align.LEFT);
         infoTextPaint.setTextSize(infoTextSize);
 
-        selectorPaint.setColor(Color.GRAY);
-        selectorPaint.setStrokeWidth(1.0F);
+        selectorPaint.setColor(Color.YELLOW);
+        selectorPaint.setStrokeWidth(2.0F);
         selectorPaint.setStrokeCap(Paint.Cap.ROUND);
         selectorPaint.setStyle(Paint.Style.STROKE);
-        selectorPaint.setPathEffect(new DashPathEffect(new float[]{2f, 10f}, 0f));
+        selectorPaint.setPathEffect(new DashPathEffect(new float[]{4f, 10f}, 0f));
     }
 
     @Override
@@ -383,7 +390,7 @@ public class SleepDetailsView extends View {
 
         fillPaint.setColor(getColorFromType(curDetail.type));
 
-        final int iconSize = infoTextSize;
+        final float iconSize = infoTextSize;
 
         final float infoIconX = chartLeftStart + ((float) chartWidth / 2) - (float) infoTextRect.width() / 2 - iconSize - 5;
 
@@ -465,7 +472,7 @@ public class SleepDetailsView extends View {
         selectorPos = -1.0F;
         curOverlay = overlay;
         if(curOverlay != null) {
-            curOverlay.init(horizontalLineCount);
+            curOverlay.init(scaleTextSize, infoTextSize, horizontalLineCount);
         }
         invalidate();
     }
```
-----------------------------------
