# Commit: cb1a2050c60009bbaa0512f5592074c4760eb799
## Message: Garmin: Do not set nextPageId if unknown
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/FileSyncServiceHandler.kt

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/FileSyncServiceHandler.kt b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/FileSyncServiceHandler.kt
index 0e1b11098b..5f981d9aae 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/FileSyncServiceHandler.kt
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/FileSyncServiceHandler.kt
@@ -95,12 +95,15 @@ class FileSyncServiceHandler(val deviceSupport: GarminSupport) {
     fun requestFileList(): GdiFileSyncService.FileSyncService {
         LOG.debug("Requesting file list starting at page {}", nextPageId)
 
+        val fileListRequestBuilder = GdiFileSyncService.FileListRequest.newBuilder().apply {
+            flags1 = GdiFileSyncService.FileId.newBuilder().setId1(42405).setId2(42405).build()
+            flags2 = GdiFileSyncService.FileId.newBuilder().setId1(42405).setId2(42405).build()
+        }
+
+        nextPageId?.let { fileListRequestBuilder.startPageId = it }
+
         return GdiFileSyncService.FileSyncService.newBuilder().buildWith {
-            fileListRequest = GdiFileSyncService.FileListRequest.newBuilder().buildWith {
-                startPageId = nextPageId ?: 0
-                flags1 = GdiFileSyncService.FileId.newBuilder().setId1(42405).setId2(42405).build()
-                flags2 = GdiFileSyncService.FileId.newBuilder().setId1(42405).setId2(42405).build()
-            }
+            fileListRequest = fileListRequestBuilder.build()
         }
     }
 
```
-----------------------------------
