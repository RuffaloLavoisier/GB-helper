# Commit: c50da0b78121f4428ce421314379970bbc935adf
## Message: Workout details: Hide standard HR chart if device provides one
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutDetailsFragment.kt

app/src/main/res/layout/fragment_workout_details.xml

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutDetailsFragment.kt b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutDetailsFragment.kt
index e7170fa517..2f2e96a5f1 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutDetailsFragment.kt
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutDetailsFragment.kt
@@ -166,7 +166,11 @@ class WorkoutDetailsFragment : Fragment(), MenuProvider {
                         .parseWorkout(summary, true)
                 }
 
-                requireActivity().addMenuProvider(this@WorkoutDetailsFragment, viewLifecycleOwner, Lifecycle.State.RESUMED)
+                requireActivity().addMenuProvider(
+                    this@WorkoutDetailsFragment,
+                    viewLifecycleOwner,
+                    Lifecycle.State.RESUMED
+                )
 
                 currentWorkout?.let { workout ->
                     updateWorkoutHeader(workout.summary)
@@ -334,12 +338,16 @@ class WorkoutDetailsFragment : Fragment(), MenuProvider {
     private fun updateFragments(workout: Workout) {
         val trackFile = ActivitySummaryUtils.getTrackFile(workout.summary)
 
-        chartFragment?.setDateAndGetData(
-            trackFile,
-            gbDevice,
-            workout.summary.startTime.time / 1000,
-            workout.summary.endTime.time / 1000
-        )
+        if (workout.charts.any { chart -> chart.group == ActivitySummaryEntries.GROUP_HEART_RATE }) {
+            binding.heartRateChartWrapper.visibility = View.GONE
+        } else {
+            chartFragment?.setDateAndGetData(
+                trackFile,
+                gbDevice,
+                workout.summary.startTime.time / 1000,
+                workout.summary.endTime.time / 1000
+            )
+        }
 
         binding.dynamicCharts.removeAllViews()
         for (chart in workout.charts) {
@@ -356,9 +364,11 @@ class WorkoutDetailsFragment : Fragment(), MenuProvider {
         }
     }
 
-    private fun addChart(chartsLayout: LinearLayout,
-                         includeHeader: Boolean,
-                         chart: WorkoutChart) {
+    private fun addChart(
+        chartsLayout: LinearLayout,
+        includeHeader: Boolean,
+        chart: WorkoutChart
+    ) {
         if (includeHeader) {
             val separator1 = View(context).apply {
                 layoutParams = LinearLayout.LayoutParams(
diff --git a/app/src/main/res/layout/fragment_workout_details.xml b/app/src/main/res/layout/fragment_workout_details.xml
index 8a925cc007..af938fa14d 100644
--- a/app/src/main/res/layout/fragment_workout_details.xml
+++ b/app/src/main/res/layout/fragment_workout_details.xml
@@ -102,6 +102,7 @@
                     TODO: Merge this into the dynamic charts
                 -->
                 <LinearLayout
+                    android:id="@+id/heartRateChartWrapper"
                     android:layout_width="match_parent"
                     android:layout_height="match_parent"
                     android:orientation="vertical">
```
-----------------------------------
