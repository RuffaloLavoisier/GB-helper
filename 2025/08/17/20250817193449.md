# Commit: 6d030c00406eac14f71341bb9ca83819cb4efa2f
## Message: Huawei: Fix tests
## Changed files:
app/src/test/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/TestDebugRequestParser.java

app/src/test/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/TestResponseManager.java

## Diff:
```
diff --git a/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/TestDebugRequestParser.java b/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/TestDebugRequestParser.java
index 35df06cf5c..e9a468a48a 100644
--- a/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/TestDebugRequestParser.java
+++ b/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/TestDebugRequestParser.java
@@ -22,7 +22,6 @@ import android.content.Context;
 import org.junit.Assert;
 import org.junit.Test;
 
-import java.io.IOException;
 import java.util.List;
 import java.util.UUID;
 
@@ -31,7 +30,6 @@ import nodomain.freeyourgadget.gadgetbridge.devices.huawei.HuaweiPacket;
 import nodomain.freeyourgadget.gadgetbridge.devices.huawei.HuaweiTLV;
 import nodomain.freeyourgadget.gadgetbridge.devices.huawei.packets.Workout;
 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;
-import nodomain.freeyourgadget.gadgetbridge.service.btbr.Transaction;
 import nodomain.freeyourgadget.gadgetbridge.service.btbr.TransactionBuilder;
 import nodomain.freeyourgadget.gadgetbridge.service.devices.huawei.requests.DebugRequest;
 import nodomain.freeyourgadget.gadgetbridge.service.devices.huawei.requests.Request;
@@ -130,11 +128,6 @@ public class TestDebugRequestParser {
 
         }
 
-        @Override
-        public void addStepData(int timestamp, short steps, short calories, short distance, byte spo, byte heartrate) {
-
-        }
-
         @Override
         public Long addWorkoutTotalsData(Workout.WorkoutTotals.Response packet) {
             return null;
diff --git a/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/TestResponseManager.java b/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/TestResponseManager.java
index 5381826e84..319641bc1c 100644
--- a/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/TestResponseManager.java
+++ b/app/src/test/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/TestResponseManager.java
@@ -31,19 +31,16 @@ import org.junit.runner.RunWith;
 import org.mockito.Mockito;
 import org.mockito.junit.MockitoJUnitRunner;
 
-import java.io.IOException;
 import java.lang.reflect.Field;
 import java.util.ArrayList;
 import java.util.Collections;
 import java.util.List;
-import java.util.Objects;
 import java.util.UUID;
 
 import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEvent;
 import nodomain.freeyourgadget.gadgetbridge.devices.huawei.HuaweiPacket;
 import nodomain.freeyourgadget.gadgetbridge.devices.huawei.packets.Workout;
 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;
-import nodomain.freeyourgadget.gadgetbridge.service.btbr.Transaction;
 import nodomain.freeyourgadget.gadgetbridge.service.btbr.TransactionBuilder;
 import nodomain.freeyourgadget.gadgetbridge.service.devices.huawei.requests.GetEventAlarmList;
 import nodomain.freeyourgadget.gadgetbridge.service.devices.huawei.requests.Request;
@@ -143,11 +140,6 @@ public class TestResponseManager {
 
         }
 
-        @Override
-        public void addStepData(int timestamp, short steps, short calories, short distance, byte spo, byte heartrate) {
-
-        }
-
         @Override
         public Long addWorkoutTotalsData(Workout.WorkoutTotals.Response packet) {
             return null;
@@ -184,7 +176,7 @@ public class TestResponseManager {
     public void testAddHandler() throws IllegalAccessException {
         Request input = new Request(supportProvider);
 
-        List<Request> expectedHandlers = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> expectedHandlers = Collections.synchronizedList(new ArrayList<>());
         expectedHandlers.add(input);
 
         ResponseManager responseManager = new ResponseManager(supportProvider);
@@ -198,12 +190,12 @@ public class TestResponseManager {
         Request input = new Request(supportProvider);
         Request extra = new Request(supportProvider);
 
-        List<Request> inputHandlers = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> inputHandlers = Collections.synchronizedList(new ArrayList<>());
         inputHandlers.add(extra);
         inputHandlers.add(input);
         inputHandlers.add(extra);
 
-        List<Request> expectedHandlers = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> expectedHandlers = Collections.synchronizedList(new ArrayList<>());
         expectedHandlers.add(extra);
         expectedHandlers.add(extra);
 
@@ -221,13 +213,13 @@ public class TestResponseManager {
         Request input2 = new GetEventAlarmList(supportProvider);
         Request extra = new Request(supportProvider);
 
-        List<Request> inputHandlers = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> inputHandlers = Collections.synchronizedList(new ArrayList<>());
         inputHandlers.add(extra);
         inputHandlers.add(input1);
         inputHandlers.add(extra);
         inputHandlers.add(input2);
 
-        List<Request> expectedHandlers = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> expectedHandlers = Collections.synchronizedList(new ArrayList<>());
         expectedHandlers.add(extra);
         expectedHandlers.add(extra);
 
@@ -249,21 +241,21 @@ public class TestResponseManager {
 
         HuaweiPacket mockHuaweiPacket = Mockito.mock(HuaweiPacket.class);
         mockHuaweiPacket.complete = true;
-        when(mockHuaweiPacket.parse((byte[]) any()))
+        when(mockHuaweiPacket.parse(any()))
                 .thenReturn(mockHuaweiPacket);
 
         Request request1 = Mockito.mock(Request.class);
-        when(request1.handleResponse((HuaweiPacket) any()))
+        when(request1.handleResponse(any()))
                 .thenReturn(true);
         when(request1.autoRemoveFromResponseHandler())
                 .thenReturn(true);
         Request request2 = Mockito.mock(Request.class);
 
-        List<Request> inputHandlers = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> inputHandlers = Collections.synchronizedList(new ArrayList<>());
         inputHandlers.add(request1);
         inputHandlers.add(request2);
 
-        List<Request> expectedHandlers = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> expectedHandlers = Collections.synchronizedList(new ArrayList<>());
         expectedHandlers.add(request2);
 
         ResponseManager responseManager = new ResponseManager(supportProvider);
@@ -277,10 +269,10 @@ public class TestResponseManager {
         Assert.assertNull(receivedPacketField.get(responseManager));
 
         verify(mockHuaweiPacket, times(1)).parse(input);
-        verify(mockAsynchronousResponse, times(0)).handleResponse((HuaweiPacket) any());
+        verify(mockAsynchronousResponse, times(0)).handleResponse(any());
         verify(request1, times(1)).handleResponse(mockHuaweiPacket);
         verify(request1, times(1)).handleResponse();
-        verify(request2, times(0)).handleResponse((HuaweiPacket) any());
+        verify(request2, times(0)).handleResponse(any());
         verify(request2, times(0)).handleResponse();
     }
 
@@ -294,21 +286,21 @@ public class TestResponseManager {
 
         HuaweiPacket mockHuaweiPacket = Mockito.mock(HuaweiPacket.class);
         mockHuaweiPacket.complete = true;
-        when(mockHuaweiPacket.parse((byte[]) any()))
+        when(mockHuaweiPacket.parse(any()))
                 .thenReturn(mockHuaweiPacket);
 
         Request request1 = Mockito.mock(Request.class);
-        when(request1.handleResponse((HuaweiPacket) any()))
+        when(request1.handleResponse(any()))
                 .thenReturn(false);
         Request request2 = Mockito.mock(Request.class);
-        when(request2.handleResponse((HuaweiPacket) any()))
+        when(request2.handleResponse(any()))
                 .thenReturn(false);
 
-        List<Request> inputHandlers = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> inputHandlers = Collections.synchronizedList(new ArrayList<>());
         inputHandlers.add(request1);
         inputHandlers.add(request2);
 
-        List<Request> expectedHandlers = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> expectedHandlers = Collections.synchronizedList(new ArrayList<>());
         expectedHandlers.add(request1);
         expectedHandlers.add(request2);
 
@@ -341,25 +333,25 @@ public class TestResponseManager {
 
         HuaweiPacket mockHuaweiPacket = Mockito.mock(HuaweiPacket.class);
         mockHuaweiPacket.complete = false;
-        when(mockHuaweiPacket.parse((byte[]) any()))
+        when(mockHuaweiPacket.parse(any()))
                 .thenReturn(mockHuaweiPacket);
 
         Request request1 = Mockito.mock(Request.class);
-        when(request1.handleResponse((HuaweiPacket) any()))
+        when(request1.handleResponse(any()))
                 .thenReturn(true);
         when(request1.autoRemoveFromResponseHandler())
                 .thenReturn(true);
         Request request2 = Mockito.mock(Request.class);
 
-        List<Request> inputHandlers = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> inputHandlers = Collections.synchronizedList(new ArrayList<>());
         inputHandlers.add(request1);
         inputHandlers.add(request2);
 
-        List<Request> expectedHandlers1 = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> expectedHandlers1 = Collections.synchronizedList(new ArrayList<>());
         expectedHandlers1.add(request1);
         expectedHandlers1.add(request2);
 
-        List<Request> expectedHandlers2 = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> expectedHandlers2 = Collections.synchronizedList(new ArrayList<>());
         expectedHandlers2.add(request2);
 
         ResponseManager responseManager = new ResponseManager(supportProvider);
@@ -373,10 +365,10 @@ public class TestResponseManager {
         Assert.assertEquals(mockHuaweiPacket, receivedPacketField.get(responseManager));
 
         verify(mockHuaweiPacket, times(1)).parse(input1);
-        verify(mockAsynchronousResponse, times(0)).handleResponse((HuaweiPacket) any());
+        verify(mockAsynchronousResponse, times(0)).handleResponse(any());
         verify(request1, times(0)).handleResponse(mockHuaweiPacket);
         verify(request1, times(0)).handleResponse();
-        verify(request2, times(0)).handleResponse((HuaweiPacket) any());
+        verify(request2, times(0)).handleResponse(any());
         verify(request2, times(0)).handleResponse();
 
         mockHuaweiPacket.complete = true;
@@ -386,10 +378,10 @@ public class TestResponseManager {
         Assert.assertNull(receivedPacketField.get(responseManager));
 
         verify(mockHuaweiPacket, times(1)).parse(input2);
-        verify(mockAsynchronousResponse, times(0)).handleResponse((HuaweiPacket) any());
+        verify(mockAsynchronousResponse, times(0)).handleResponse(any());
         verify(request1, times(1)).handleResponse(mockHuaweiPacket);
         verify(request1, times(1)).handleResponse();
-        verify(request2, times(0)).handleResponse((HuaweiPacket) any());
+        verify(request2, times(0)).handleResponse(any());
         verify(request2, times(0)).handleResponse();
     }
 
@@ -404,21 +396,21 @@ public class TestResponseManager {
 
         HuaweiPacket mockHuaweiPacket = Mockito.mock(HuaweiPacket.class);
         mockHuaweiPacket.complete = false;
-        when(mockHuaweiPacket.parse((byte[]) any()))
+        when(mockHuaweiPacket.parse(any()))
                 .thenReturn(mockHuaweiPacket);
 
         Request request1 = Mockito.mock(Request.class);
-        when(request1.handleResponse((HuaweiPacket) any()))
+        when(request1.handleResponse(any()))
                 .thenReturn(false);
         Request request2 = Mockito.mock(Request.class);
-        when(request2.handleResponse((HuaweiPacket) any()))
+        when(request2.handleResponse(any()))
                 .thenReturn(false);
 
-        List<Request> inputHandlers = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> inputHandlers = Collections.synchronizedList(new ArrayList<>());
         inputHandlers.add(request1);
         inputHandlers.add(request2);
 
-        List<Request> expectedHandlers = Collections.synchronizedList(new ArrayList<Request>());
+        List<Request> expectedHandlers = Collections.synchronizedList(new ArrayList<>());
         expectedHandlers.add(request1);
         expectedHandlers.add(request2);
 
@@ -433,10 +425,10 @@ public class TestResponseManager {
         Assert.assertEquals(mockHuaweiPacket, receivedPacketField.get(responseManager));
 
         verify(mockHuaweiPacket, times(1)).parse(input1);
-        verify(mockAsynchronousResponse, times(0)).handleResponse((HuaweiPacket) any());
+        verify(mockAsynchronousResponse, times(0)).handleResponse(any());
         verify(request1, times(0)).handleResponse(mockHuaweiPacket);
         verify(request1, times(0)).handleResponse();
-        verify(request2, times(0)).handleResponse((HuaweiPacket) any());
+        verify(request2, times(0)).handleResponse(any());
         verify(request2, times(0)).handleResponse();
 
         mockHuaweiPacket.complete = true;
@@ -446,10 +438,10 @@ public class TestResponseManager {
         Assert.assertNull(receivedPacketField.get(responseManager));
 
         verify(mockHuaweiPacket, times(1)).parse(input2);
-        verify(mockAsynchronousResponse, times(1)).handleResponse((HuaweiPacket) any());
+        verify(mockAsynchronousResponse, times(1)).handleResponse(any());
         verify(request1, times(1)).handleResponse(mockHuaweiPacket);
         verify(request1, times(0)).handleResponse();
-        verify(request2, times(1)).handleResponse((HuaweiPacket) any());
+        verify(request2, times(1)).handleResponse(any());
         verify(request2, times(0)).handleResponse();
     }
 
```
-----------------------------------
