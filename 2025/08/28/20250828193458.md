# Commit: f49ec911b7814639a85cdfb0b82f7976cfa1c1b1
## Message: Garmin: Fix upload of larger PRG files
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/GarminPrgFile.java

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/GarminPrgFile.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/GarminPrgFile.java
index bb16c742f5..4b244a4234 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/GarminPrgFile.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/garmin/GarminPrgFile.java
@@ -67,7 +67,7 @@ public class GarminPrgFile {
             return;
         }
 
-        final int maxExpectedFileSize = 1024 * 1024; // 1MB
+        final int maxExpectedFileSize = 10 * 1024 * 1024; // 10MB
         if (uriHelper.getFileSize() > maxExpectedFileSize) {
             LOG.warn("File size is larger than the maximum expected file size of {}", maxExpectedFileSize);
             return;
@@ -77,7 +77,6 @@ public class GarminPrgFile {
             this.fw = FileUtils.readAll(in, maxExpectedFileSize);
         } catch (final IOException e) {
             LOG.error("Failed to read bytes from {}", uri, e);
-            return;
         }
 
         // TODO parse bytes
@@ -92,7 +91,7 @@ public class GarminPrgFile {
     }
 
     public boolean isValid() {
-        return valid;
+        return valid && fw != null;
     }
 
     public byte[] getBytes() {
```
-----------------------------------
