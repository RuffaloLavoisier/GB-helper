# Commit: 17dcb959634a45c310f184ae0cf0d6cf727baf06
## Message: Backup and restore file modification times
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/backup/ZipBackupExportJob.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/backup/ZipBackupImportJob.java

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/backup/ZipBackupExportJob.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/backup/ZipBackupExportJob.java
index 17f9acdbec..ecb7675988 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/backup/ZipBackupExportJob.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/backup/ZipBackupExportJob.java
@@ -215,9 +215,10 @@ public class ZipBackupExportJob extends AbstractZipBackupJob {
         LOG.trace("Exporting file: {}", relativePath);
 
         final ZipEntry zipEntry = new ZipEntry(EXTERNAL_FILES_FOLDER + "/" + relativePath);
+        zipEntry.setTime(file.lastModified());
         zipOut.putNextEntry(zipEntry);
 
-        try (final InputStream in = new FileInputStream(new File(externalFilesDir, relativePath))) {
+        try (final InputStream in = new FileInputStream(file)) {
             int read;
             while ((read = in.read(copyBuffer)) > 0) {
                 zipOut.write(copyBuffer, 0, read);
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/backup/ZipBackupImportJob.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/backup/ZipBackupImportJob.java
index 7372881cef..1940100062 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/backup/ZipBackupImportJob.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/backup/ZipBackupImportJob.java
@@ -124,6 +124,12 @@ public class ZipBackupImportJob extends AbstractZipBackupJob {
                     failedFiles.add(externalFile.getName());
                 }
 
+                final long zipEntryTime = externalFile.getTime();
+                if (zipEntryTime > 0) {
+                    //noinspection ResultOfMethodCallIgnored
+                    targetExternalFile.setLastModified(zipEntryTime);
+                }
+
                 // 10% to 75%
                 final int progress = (int) (10 + 65 * (i / (float) externalFiles.size()));
                 updateProgress(progress, R.string.backup_restore_importing_files_i_of_n, i + 1, externalFiles.size());
```
-----------------------------------
