# Commit: 8c4eb1b9cebd39f3cbcf2a5bfa93ee97aadf8925
## Message: Maps: Fix track outline when no maps are available
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutGpsFragment.kt

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/maps/MapsManager.java

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutGpsFragment.kt b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutGpsFragment.kt
index fdaf3169d7..c0282ccde2 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutGpsFragment.kt
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/workouts/WorkoutGpsFragment.kt
@@ -114,7 +114,7 @@ class WorkoutGpsFragment : Fragment() {
 
     fun setTrackData(inputFile: File?) {
         this.inputFile = inputFile
-        if (mapsManager.isMapLoaded && inputFile != null) {
+        if (inputFile != null) {
             viewModel.loadTrackData(inputFile)
         }
     }
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/maps/MapsManager.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/maps/MapsManager.java
index 166b2f6398..65e777d35c 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/maps/MapsManager.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/maps/MapsManager.java
@@ -93,13 +93,10 @@ public final class MapsManager {
         }
 
         final DocumentFile folder = DocumentFile.fromTreeUri(mContext, Uri.parse(folderUri));
-        if (folder == null || folder.listFiles().length == 0) {
-            return;
-        }
 
         final MultiMapDataStore multiMapDataStore = new MultiMapDataStore(MultiMapDataStore.DataPolicy.RETURN_ALL);
 
-        final DocumentFile[] documentFiles = folder.listFiles();
+        final DocumentFile[] documentFiles = folder != null ? folder.listFiles() : new DocumentFile[0];
 
         LOG.debug("Got {} map files", documentFiles.length);
 
```
-----------------------------------
