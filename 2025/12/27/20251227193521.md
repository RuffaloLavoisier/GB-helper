# Commit: c8e4578934ca7596506834472169ab131f9318d9
## Message: BTBR: Remove queueConnected() (#5643)
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/btbr/TransactionBuilder.java

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/requests/Request.java

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/btbr/TransactionBuilder.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/btbr/TransactionBuilder.java
index 99cc1eb528..86f5c8f715 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/btbr/TransactionBuilder.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/btbr/TransactionBuilder.java
@@ -17,10 +17,6 @@
 package nodomain.freeyourgadget.gadgetbridge.service.btbr;
 
 import android.bluetooth.BluetoothSocket;
-import android.content.Context;
-
-import org.slf4j.Logger;
-import org.slf4j.LoggerFactory;
 
 import androidx.annotation.IntRange;
 import androidx.annotation.NonNull;
@@ -28,7 +24,6 @@ import androidx.annotation.Nullable;
 import androidx.annotation.StringRes;
 import androidx.annotation.VisibleForTesting;
 
-import java.io.IOException;
 import java.util.function.Predicate;
 
 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;
@@ -131,7 +126,6 @@ public class TransactionBuilder {
     /**
      * To be used as the final step to execute the transaction by the queue.
      * @throws IllegalStateException if this builder has already been queued
-     * @see #queueConnected()
      */
     public void queue() {
         if (mQueued) {
@@ -151,19 +145,4 @@ public class TransactionBuilder {
     public String getTaskName() {
         return mTransaction.getTaskName();
     }
-
-    /// Ensures that the device is connected and (only then) performs the actions of the given
-    /// transaction builder.
-    ///
-    /// @throws IOException if unable to connect to the device
-    /// @throws IllegalStateException if this builder has already been queued
-    /// @see #queue()
-    public void queueConnected() throws IOException {
-        if (!mDeviceSupport.isConnected()) {
-            if (!mDeviceSupport.connect()) {
-                throw new IOException("Unable to connect to device: " + mDeviceSupport.getDevice());
-            }
-        }
-        queue();
-    }
 }
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/requests/Request.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/requests/Request.java
index 01123c0523..7f437670f5 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/requests/Request.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/huawei/requests/Request.java
@@ -340,7 +340,7 @@ public class Request {
             this.builderLe.wait(millis);
     }
 
-    private void performConnected() throws IOException {
+    private void performConnected() {
         LOG.debug("Perform connected");
 
         // Start the timeout timer
@@ -348,9 +348,9 @@ public class Request {
             handler.postDelayed(this.timeoutRunner, this.timeout);
 
         if (!this.supportProvider.isBLE()) {
-            builderBr.queueConnected();
+            builderBr.queue();
         } else {
-            builderLe.queueConnected();
+            builderLe.queue();
         }
     }
 
```
-----------------------------------
