# Commit: 72349301917a46639ffe17d81e21545a475d4fd3
## Message: Debug: Fix WeatherSpec duplicated location
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/debug/WeatherSpecDebugFragment.kt

app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/debug/WidgetsDebugFragment.kt

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/debug/WeatherSpecDebugFragment.kt b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/debug/WeatherSpecDebugFragment.kt
index 0fed6e0b3b..636308cf3a 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/debug/WeatherSpecDebugFragment.kt
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/debug/WeatherSpecDebugFragment.kt
@@ -4,10 +4,12 @@ import android.os.Bundle
 import androidx.preference.PreferenceCategory
 import nodomain.freeyourgadget.gadgetbridge.R
 import nodomain.freeyourgadget.gadgetbridge.model.WeatherSpec
+import nodomain.freeyourgadget.gadgetbridge.util.DateTimeUtils
 import java.text.SimpleDateFormat
 import java.util.Date
 import java.util.Locale
 import java.util.UUID
+import java.util.concurrent.TimeUnit
 
 class WeatherSpecDebugFragment : AbstractDebugFragment() {
     override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
@@ -34,7 +36,7 @@ class WeatherSpecDebugFragment : AbstractDebugFragment() {
     }
 
     private fun addPreference(title: String, summary: Any?, onClickFunction: (() -> Unit)? = null) {
-        addDynamicPref(preferenceScreen, title, summary?.toString() ?: "<null>", R.drawable.ic_widgets) {
+        addDynamicPref(preferenceScreen, title, summary?.toString() ?: "<null>") {
             onClickFunction?.invoke()
         }
     }
@@ -52,8 +54,11 @@ class WeatherSpecDebugFragment : AbstractDebugFragment() {
         val sdf = SimpleDateFormat("yyyy-MM-dd HH:mm:ss Z", Locale.ROOT)
 
         addPreference("Location", weatherSpec.location)
-        addPreference("Location", weatherSpec.location)
-        addPreference("Timestamp", sdf.format(Date(weatherSpec.timestamp * 1000L)))
+        addPreference("Timestamp", String.format(
+            "%s (%s)",
+            sdf.format(Date(weatherSpec.timestamp * 1000L)),
+            DateTimeUtils.formatDurationHoursMinutes(System.currentTimeMillis() - weatherSpec.timestamp * 1000L, TimeUnit.MILLISECONDS)
+        ))
         addPreference("Current Temp", "${weatherSpec.currentTemp} K (${weatherSpec.currentTemp - 273} °C)")
         addPreference("Max Temp", "${weatherSpec.todayMaxTemp} K (${weatherSpec.todayMaxTemp - 273} °C)")
         addPreference("Min Temp", "${weatherSpec.todayMinTemp} K (${weatherSpec.todayMinTemp - 273} °C)")
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/debug/WidgetsDebugFragment.kt b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/debug/WidgetsDebugFragment.kt
index c2be834613..f22c5352ed 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/debug/WidgetsDebugFragment.kt
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/debug/WidgetsDebugFragment.kt
@@ -40,7 +40,7 @@ class WidgetsDebugFragment : AbstractDebugFragment() {
         }
 
         for ((i, appWidgetID) in appWidgetIDs.withIndex()) {
-            addDynamicPref(widgetsHeader, "Widget $i", "id = $appWidgetID") {
+            addDynamicPref(widgetsHeader, "Widget $i", "id = $appWidgetID", R.drawable.ic_widgets) {
                 val items: MutableList<RunnableListIconItem?> = ArrayList(4)
 
                 items.add(
```
-----------------------------------
