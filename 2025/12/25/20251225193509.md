# Commit: 835030bac480d3cbc6ba054b570c01281af4d3a3
## Message: Sort permissions list

- Ungranted permissions at the top
- Alphabetically within ungranted / granted groups
## Changed files:
app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/welcome/WelcomeFragmentPermissions.java

## Diff:
```
diff --git a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/welcome/WelcomeFragmentPermissions.java b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/welcome/WelcomeFragmentPermissions.java
index ccfd207ee1..b9ce1b7280 100644
--- a/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/welcome/WelcomeFragmentPermissions.java
+++ b/app/src/main/java/nodomain/freeyourgadget/gadgetbridge/activities/welcome/WelcomeFragmentPermissions.java
@@ -97,7 +97,19 @@ public class WelcomeFragmentPermissions extends Fragment {
         }
 
         // Set up RecyclerView
-        permissionAdapter = new PermissionAdapter(PermissionsUtils.getRequiredPermissionsList(requireActivity()), requireContext());
+        final ArrayList<PermissionsUtils.PermissionDetails> requiredPermissionsList = PermissionsUtils.getRequiredPermissionsList(requireActivity());
+        requiredPermissionsList.sort((p1, p2) -> {
+            final boolean p1Granted = PermissionsUtils.checkPermission(requireContext(), p1.permission());
+            final boolean p2Granted = PermissionsUtils.checkPermission(requireContext(), p2.permission());
+
+            // Ungranted at the top
+            if (p1Granted && !p2Granted) return 1;
+            if (!p1Granted && p2Granted) return -1;
+
+            // Both granted or both ungranted -> sort by name
+            return p1.title().compareToIgnoreCase(p2.title());
+        });
+        permissionAdapter = new PermissionAdapter(requiredPermissionsList, requireContext());
         binding.permissionsList.setLayoutManager(new LinearLayoutManager(requireContext()));
         binding.permissionsList.setAdapter(permissionAdapter);
 
```
-----------------------------------
